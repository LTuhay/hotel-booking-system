2024-07-29 14:10:48.859 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:10:49.815 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:10:49.819 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:10:49.825 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:10:49.828 -03:00 [INF] Hosting environment: Development
2024-07-29 14:10:49.830 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:10:51.727 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:10:52.368 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 655.544ms
2024-07-29 14:10:52.466 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:10:52.481 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 15.6491ms
2024-07-29 14:10:52.489 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:10:52.641 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 151.4562ms
2024-07-29 14:10:52.784 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:10:52.828 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/favicon-32x32.png - null null
2024-07-29 14:10:52.844 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-07-29 14:10:52.846 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/favicon-32x32.png - 200 628 image/png 18.1661ms
2024-07-29 14:10:52.990 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 205.9326ms
2024-07-29 14:11:37.370 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 72
2024-07-29 14:11:37.496 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:11:37.552 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 14:11:40.458 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:11:40.497 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:11:40.667 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 14:11:40.688 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 3127.1042ms
2024-07-29 14:11:40.690 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:11:40.695 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 3317.0869 ms
2024-07-29 14:11:40.709 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 3339.1303ms
2024-07-29 14:12:23.378 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:12:23.457 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/7/2024 16:52:14', Current time (UTC): '29/7/2024 17:12:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:12:23.520 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/7/2024 16:52:14', Current time (UTC): '29/7/2024 17:12:23'.
2024-07-29 14:12:23.527 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 14:12:23.533 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 14:12:23.534 -03:00 [INF] HTTP GET /api/booking/6/pdf responded 401 in 151.2053 ms
2024-07-29 14:12:23.535 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - 401 0 null 157.6568ms
2024-07-29 14:12:29.500 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:12:29.520 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:12:29.531 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:12:29.798 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:12:29.804 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:13:51.980 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:13:52.291 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:13:52.293 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:13:52.295 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:13:52.295 -03:00 [INF] Hosting environment: Development
2024-07-29 14:13:52.296 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:13:52.866 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:13:53.125 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 265.7545ms
2024-07-29 14:13:53.156 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:13:53.156 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:13:53.172 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 16.8419ms
2024-07-29 14:13:53.236 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.3323ms
2024-07-29 14:13:53.329 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:13:53.486 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 156.8917ms
2024-07-29 14:13:56.903 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:13:57.042 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:13:57.071 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:14:00.121 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:14:00.161 -03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:14:01.131 -03:00 [INF] Executing FileContentResult, sending file with download name 'Booking_6.pdf' ...
2024-07-29 14:14:01.158 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api) in 4077.3691ms
2024-07-29 14:14:01.162 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:14:01.168 -03:00 [INF] HTTP GET /api/booking/6/pdf responded 200 in 4256.0619 ms
2024-07-29 14:14:01.184 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - 200 1331 application/pdf 4280.3413ms
2024-07-29 14:29:33.879 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:29:34.301 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:29:34.303 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:29:34.305 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:29:34.305 -03:00 [INF] Hosting environment: Development
2024-07-29 14:29:34.306 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:29:35.853 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:29:36.226 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 379.2434ms
2024-07-29 14:29:36.252 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:29:36.266 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 14.2923ms
2024-07-29 14:29:36.280 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:29:36.394 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.3977ms
2024-07-29 14:29:36.492 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:29:36.751 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.8717ms
2024-07-29 14:31:32.806 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/booking - application/json 163
2024-07-29 14:31:33.135 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 14:31:33.208 -03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingSystem.Application.DTO.BookingDTO.BookingRequest) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:31:36.564 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:31:36.616 -03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:31:36.895 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-07-29 14:31:36.905 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:31:36.911 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:31:37.023 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 14:31:37.026 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 14:31:37.348 -03:00 [INF] Executing command: INSERT INTO "Bookings" ("CheckInDate", "CheckOutDate", "HotelId", "RoomId", "SpecialRequests", "TotalPrice", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "BookingId";

2024-07-29 14:31:37.354 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 23), @p5='?' (DbType = Decimal), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("CheckInDate", "CheckOutDate", "HotelId", "RoomId", "SpecialRequests", "TotalPrice", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "BookingId";
2024-07-29 14:31:37.404 -03:00 [INF] Executing command: SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:31:37.406 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:31:37.432 -03:00 [INF] Executing command: UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;

2024-07-29 14:31:37.436 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 8), @p3='?' (Size = 5), @p4='?', @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;
2024-07-29 14:31:37.540 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 14:31:37.582 -03:00 [INF] Email sent successfully to john.doe@example.com
2024-07-29 14:31:37.624 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api) in 4406.1718ms
2024-07-29 14:31:37.626 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 14:31:37.630 -03:00 [INF] HTTP POST /api/booking responded 201 in 4811.1125 ms
2024-07-29 14:31:37.645 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/booking - 201 null application/json; charset=utf-8 4839.7739ms
2024-07-29 14:43:28.449 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:43:28.734 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:43:28.735 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:43:28.737 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:43:28.738 -03:00 [INF] Hosting environment: Development
2024-07-29 14:43:28.739 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:43:29.870 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:43:30.386 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 527.4355ms
2024-07-29 14:43:30.393 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:43:30.406 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 13.2518ms
2024-07-29 14:43:30.414 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:43:30.507 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.0191ms
2024-07-29 14:43:30.611 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:43:30.829 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.8815ms
2024-07-29 14:43:38.604 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 72
2024-07-29 14:43:38.778 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:43:38.843 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 14:43:41.243 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:43:41.287 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:43:41.471 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 14:43:41.485 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 2632.3615ms
2024-07-29 14:43:41.487 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:43:41.490 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 2869.5068 ms
2024-07-29 14:43:41.506 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 2901.7094ms
2024-07-29 14:43:50.950 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/6 - application/json 81
2024-07-29 14:43:51.048 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 03:40:18', Current time (UTC): '29/7/2024 17:43:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:43:51.107 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 03:40:18', Current time (UTC): '29/7/2024 17:43:51'.
2024-07-29 14:43:51.108 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api)'
2024-07-29 14:43:51.116 -03:00 [INF] Route matched with {action = "GetCityById", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCityById(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 14:43:51.302 -03:00 [INF] Executing command: SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:43:51.306 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:43:51.401 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponse'.
2024-07-29 14:43:51.420 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api) in 301.9798ms
2024-07-29 14:43:51.422 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api)'
2024-07-29 14:43:51.425 -03:00 [INF] HTTP GET /api/city/6 responded 200 in 467.8865 ms
2024-07-29 14:43:51.426 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/6 - 200 null application/json; charset=utf-8 476.2692ms
2024-07-29 14:43:57.475 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/10 - application/json 251
2024-07-29 14:43:57.484 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 14:43:57.493 -03:00 [INF] Route matched with {action = "GetHotelById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelById(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 14:43:57.569 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-07-29 14:43:57.579 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:43:57.581 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:43:57.654 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse'.
2024-07-29 14:43:57.680 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api) in 183.3275ms
2024-07-29 14:43:57.684 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 14:43:57.686 -03:00 [INF] HTTP GET /api/hotel/10 responded 200 in 205.7508 ms
2024-07-29 14:43:57.688 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/10 - 200 null application/json; charset=utf-8 213.3811ms
2024-07-29 14:44:04.870 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/search?Query=Resort&CheckInDate=2024-08-01&CheckOutDate=2024-08-07 - null null
2024-07-29 14:44:04.878 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '29/7/2024 17:44:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:44:04.886 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '29/7/2024 17:44:04'.
2024-07-29 14:44:04.888 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 14:44:04.907 -03:00 [INF] Route matched with {action = "Search", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HotelBookingSystem.Application.DTO.HotelDTO.HotelSearchParameters) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 14:44:05.191 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Hotels" AS "h"
INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
WHERE (instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r"
    WHERE "h"."HotelId" = "r"."HotelId" AND NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_1 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_2)) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r0"
    WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."AdultCapacity" >= @__searchParameters_Adults_3) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r1"
    WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."ChildCapacity" >= @__searchParameters_Children_4)
2024-07-29 14:44:05.195 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchParameters_Query_0='?' (Size = 6), @__searchParameters_CheckInDate_1='?' (DbType = DateTime), @__searchParameters_CheckOutDate_2='?' (DbType = DateTime), @__searchParameters_Adults_3='?' (DbType = Int32), @__searchParameters_Children_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Hotels" AS "h"
INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
WHERE (instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r"
    WHERE "h"."HotelId" = "r"."HotelId" AND NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_1 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_2)) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r0"
    WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."AdultCapacity" >= @__searchParameters_Adults_3) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r1"
    WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."ChildCapacity" >= @__searchParameters_Children_4)
2024-07-29 14:44:05.219 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 14:44:05.221 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 14:44:05.249 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-07-29 14:44:05.265 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."CityId0", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "c"."CityId" AS "CityId0"
    FROM "Hotels" AS "h"
    INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
    WHERE (instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r"
        WHERE "h"."HotelId" = "r"."HotelId" AND NOT EXISTS (
            SELECT 1
            FROM "Bookings" AS "b"
            WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_1 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_2)) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r0"
        WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."AdultCapacity" >= @__searchParameters_Adults_3) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r1"
        WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."ChildCapacity" >= @__searchParameters_Children_4)
    LIMIT @__p_6 OFFSET @__p_5
) AS "t"
LEFT JOIN (
    SELECT "r2"."RoomId", "r2"."AdultCapacity", "r2"."ChildCapacity", "r2"."CreatedAt", "r2"."DiscountedPrice", "r2"."FeaturedDeal", "r2"."HotelId", "r2"."ImagesUrl", "r2"."PricePerNight", "r2"."RoomType", "r2"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId" AS "HotelId0", "b0"."RoomId" AS "RoomId0", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
    FROM "Rooms" AS "r2"
    LEFT JOIN "Bookings" AS "b0" ON "r2"."RoomId" = "b0"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t"."CityId0", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:44:05.274 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchParameters_Query_0='?' (Size = 6), @__searchParameters_CheckInDate_1='?' (DbType = DateTime), @__searchParameters_CheckOutDate_2='?' (DbType = DateTime), @__searchParameters_Adults_3='?' (DbType = Int32), @__searchParameters_Children_4='?' (DbType = Int32), @__p_6='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."CityId0", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "c"."CityId" AS "CityId0"
    FROM "Hotels" AS "h"
    INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
    WHERE (instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r"
        WHERE "h"."HotelId" = "r"."HotelId" AND NOT EXISTS (
            SELECT 1
            FROM "Bookings" AS "b"
            WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_1 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_2)) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r0"
        WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."AdultCapacity" >= @__searchParameters_Adults_3) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r1"
        WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."ChildCapacity" >= @__searchParameters_Children_4)
    LIMIT @__p_6 OFFSET @__p_5
) AS "t"
LEFT JOIN (
    SELECT "r2"."RoomId", "r2"."AdultCapacity", "r2"."ChildCapacity", "r2"."CreatedAt", "r2"."DiscountedPrice", "r2"."FeaturedDeal", "r2"."HotelId", "r2"."ImagesUrl", "r2"."PricePerNight", "r2"."RoomType", "r2"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId" AS "HotelId0", "b0"."RoomId" AS "RoomId0", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
    FROM "Rooms" AS "r2"
    LEFT JOIN "Bookings" AS "b0" ON "r2"."RoomId" = "b0"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t"."CityId0", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:44:05.330 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 14:44:05.336 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api) in 425.463ms
2024-07-29 14:44:05.338 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 14:44:05.339 -03:00 [INF] HTTP GET /api/hotel/search responded 200 in 462.4526 ms
2024-07-29 14:44:05.343 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/search?Query=Resort&CheckInDate=2024-08-01&CheckOutDate=2024-08-07 - 200 null application/json; charset=utf-8 472.1989ms
2024-07-29 14:44:11.556 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/15 - application/json 281
2024-07-29 14:44:11.559 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 18:52:08', Current time (UTC): '29/7/2024 17:44:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:44:11.563 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 18:52:08', Current time (UTC): '29/7/2024 17:44:11'.
2024-07-29 14:44:11.564 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api)'
2024-07-29 14:44:11.570 -03:00 [INF] Route matched with {action = "GetRoomById", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomById(Int32) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 14:44:11.588 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:44:11.589 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:44:11.595 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse'.
2024-07-29 14:44:11.597 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api) in 25.6337ms
2024-07-29 14:44:11.598 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api)'
2024-07-29 14:44:11.599 -03:00 [INF] HTTP GET /api/room/15 responded 200 in 40.5932 ms
2024-07-29 14:44:11.600 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/15 - 200 null application/json; charset=utf-8 44.474ms
2024-07-29 14:44:20.630 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/3 - null null
2024-07-29 14:44:20.660 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 14:44:20.669 -03:00 [INF] Route matched with {action = "GetBookingDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingDetails(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:44:20.787 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:44:20.791 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:44:20.836 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 14:44:20.845 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api) in 174.4165ms
2024-07-29 14:44:20.848 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 14:44:20.853 -03:00 [INF] HTTP GET /api/booking/3 responded 200 in 219.9190 ms
2024-07-29 14:44:20.858 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/3 - 200 null application/json; charset=utf-8 228.204ms
2024-07-29 14:44:27.564 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:44:27.571 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:44:27.576 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:44:27.584 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:44:27.586 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:44:28.472 -03:00 [INF] Executing FileContentResult, sending file with download name 'Booking_6.pdf' ...
2024-07-29 14:44:28.485 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api) in 907.442ms
2024-07-29 14:44:28.487 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:44:28.490 -03:00 [INF] HTTP GET /api/booking/6/pdf responded 200 in 922.7790 ms
2024-07-29 14:44:28.493 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - 200 1331 application/pdf 929.2125ms
2024-07-29 14:44:43.363 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/payment/1 - null null
2024-07-29 14:44:43.367 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api)'
2024-07-29 14:44:43.371 -03:00 [INF] Route matched with {action = "GetPaymentDetails", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaymentDetails(Int32) on controller HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController (HotelBookingSystem.Api).
2024-07-29 14:44:43.404 -03:00 [INF] Executing command: SELECT "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status"
FROM "Payments" AS "p"
WHERE "p"."PaymentId" = @__p_0
LIMIT 1
2024-07-29 14:44:43.406 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status"
FROM "Payments" AS "p"
WHERE "p"."PaymentId" = @__p_0
LIMIT 1
2024-07-29 14:44:43.414 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.PaymentDTO.PaymentResponse'.
2024-07-29 14:44:43.416 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api) in 42.8985ms
2024-07-29 14:44:43.418 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api)'
2024-07-29 14:44:43.420 -03:00 [INF] HTTP GET /api/payment/1 responded 200 in 54.5260 ms
2024-07-29 14:44:43.422 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/payment/1 - 200 null application/json; charset=utf-8 58.5887ms
2024-07-29 22:42:09.747 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 22:42:10.577 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 22:42:10.578 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 22:42:10.581 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 22:42:10.582 -03:00 [INF] Hosting environment: Development
2024-07-29 22:42:10.583 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 22:42:12.155 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 22:42:12.442 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 297.4136ms
2024-07-29 22:42:12.530 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 22:42:12.545 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 13.0942ms
2024-07-29 22:42:12.675 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 22:42:12.923 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 247.137ms
2024-07-29 22:42:48.142 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/ - application/json 291
2024-07-29 22:42:48.276 -03:00 [INF] HTTP POST /api/auth/ responded 404 in 122.3204 ms
2024-07-29 22:42:48.299 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/ - 404 0 null 156.7723ms
2024-07-29 22:42:48.308 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7288/api/auth/, Response status code: 404
2024-07-29 22:43:01.804 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 72
2024-07-29 22:43:01.821 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 22:43:01.886 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 22:43:04.884 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:43:04.942 -03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__email_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:43:05.158 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 22:43:05.174 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 3280.4273ms
2024-07-29 22:43:05.178 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 22:43:05.180 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 3369.3538 ms
2024-07-29 22:43:05.191 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 3387.4251ms
2024-07-29 22:43:44.452 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 22:43:44.737 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 22:43:44.740 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 22:43:44.742 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 22:43:44.743 -03:00 [INF] Hosting environment: Development
2024-07-29 22:43:44.744 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 22:43:45.692 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 22:43:45.926 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 249.0347ms
2024-07-29 22:43:46.031 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 22:43:46.048 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 16.7971ms
2024-07-29 22:43:46.163 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 22:43:46.359 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 196.5335ms
2024-07-29 22:43:52.990 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/ - application/json 291
2024-07-29 22:43:53.157 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api)'
2024-07-29 22:43:53.180 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HotelBookingSystem.Application.DTO.UserDTO.UserRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 22:43:55.749 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:43:55.810 -03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__email_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:43:56.122 -03:00 [INF] Executing command: INSERT INTO "Users" ("Address", "City", "Country", "DateOfBirth", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Role")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "UserId";

2024-07-29 22:43:56.124 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 11), @p1='?' (Size = 11), @p2='?' (Size = 3), @p3='?' (DbType = DateTime), @p4='?' (Size = 16), @p5='?' (Size = 4), @p6='?' (Size = 5), @p7='?' (Size = 88), @p8='?' (Size = 11), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Address", "City", "Country", "DateOfBirth", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Role")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "UserId";
2024-07-29 22:43:56.180 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[HotelBookingSystem.Application.DTO.UserDTO.UserResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 22:43:56.202 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api) in 3013.1725ms
2024-07-29 22:43:56.204 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api)'
2024-07-29 22:43:56.207 -03:00 [INF] HTTP POST /api/auth/ responded 200 in 3195.1202 ms
2024-07-29 22:43:56.217 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/ - 200 null application/json; charset=utf-8 3227.6202ms
2024-07-29 22:45:21.477 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth - application/json 296
2024-07-29 22:45:21.497 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api)'
2024-07-29 22:45:21.511 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HotelBookingSystem.Application.DTO.UserDTO.UserRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 22:45:21.598 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:45:21.600 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 24)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:45:21.610 -03:00 [INF] Executing command: INSERT INTO "Users" ("Address", "City", "Country", "DateOfBirth", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Role")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "UserId";

2024-07-29 22:45:21.613 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 11), @p1='?' (Size = 11), @p2='?' (Size = 3), @p3='?' (DbType = DateTime), @p4='?' (Size = 24), @p5='?' (Size = 5), @p6='?' (Size = 4), @p7='?' (Size = 88), @p8='?' (Size = 11), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Address", "City", "Country", "DateOfBirth", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Role")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "UserId";
2024-07-29 22:45:22.026 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[HotelBookingSystem.Application.DTO.UserDTO.UserResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 22:45:22.031 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api) in 514.3843ms
2024-07-29 22:45:22.036 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api)'
2024-07-29 22:45:22.037 -03:00 [INF] HTTP POST /api/auth responded 200 in 543.6920 ms
2024-07-29 22:45:22.042 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth - 200 null application/json; charset=utf-8 566.8934ms
2024-07-29 22:45:31.802 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 74
2024-07-29 22:45:31.808 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 22:45:31.819 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 22:45:31.848 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:45:31.851 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:45:31.930 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 22:45:31.936 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 113.8419ms
2024-07-29 22:45:31.938 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 22:45:31.939 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 133.0316 ms
2024-07-29 22:45:31.940 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 138.3433ms
2024-07-29 22:45:52.295 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/city - application/json 150
2024-07-29 22:45:52.411 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 18:58:10', Current time (UTC): '30/7/2024 01:45:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:45:52.888 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 18:58:10', Current time (UTC): '30/7/2024 01:45:52'.
2024-07-29 22:45:52.936 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 22:45:52.945 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 22:45:52.946 -03:00 [INF] HTTP POST /api/city responded 401 in 645.1095 ms
2024-07-29 22:45:52.948 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/city - 401 0 null 653.0512ms
2024-07-29 22:46:22.256 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/city - application/json 150
2024-07-29 22:46:22.288 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.CreateCity (HotelBookingSystem.Api)'
2024-07-29 22:46:22.295 -03:00 [INF] Route matched with {action = "CreateCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCity(HotelBookingSystem.Application.DTO.CityDTO.CityRequest) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:46:22.343 -03:00 [INF] Executing command: INSERT INTO "Cities" ("Country", "CreatedAt", "Name", "PostOffice", "ThumbnailUrl", "UpdatedAt", "Visitors")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "CityId";

2024-07-29 22:46:22.346 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 11), @p3='?' (Size = 5), @p4='?' (Size = 41), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Country", "CreatedAt", "Name", "PostOffice", "ThumbnailUrl", "UpdatedAt", "Visitors")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "CityId";
2024-07-29 22:46:22.371 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponse'.
2024-07-29 22:46:22.421 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.CreateCity (HotelBookingSystem.Api) in 123.5503ms
2024-07-29 22:46:22.424 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.CreateCity (HotelBookingSystem.Api)'
2024-07-29 22:46:22.426 -03:00 [INF] HTTP POST /api/city responded 201 in 162.1066 ms
2024-07-29 22:46:22.428 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/city - 201 null application/json; charset=utf-8 171.9059ms
2024-07-29 22:46:32.213 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/7 - application/json 81
2024-07-29 22:46:32.218 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 03:40:18', Current time (UTC): '30/7/2024 01:46:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:46:32.225 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 03:40:18', Current time (UTC): '30/7/2024 01:46:32'.
2024-07-29 22:46:32.228 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api)'
2024-07-29 22:46:32.234 -03:00 [INF] Route matched with {action = "GetCityById", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCityById(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:46:32.277 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:46:32.279 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:46:32.282 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponse'.
2024-07-29 22:46:32.286 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api) in 48.6129ms
2024-07-29 22:46:32.288 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api)'
2024-07-29 22:46:32.289 -03:00 [INF] HTTP GET /api/city/7 responded 200 in 72.9323 ms
2024-07-29 22:46:32.291 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/7 - 200 null application/json; charset=utf-8 78.5155ms
2024-07-29 22:46:43.183 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/7/with-hotels - application/json 81
2024-07-29 22:46:43.185 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:46:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:46:43.191 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:46:43'.
2024-07-29 22:46:43.193 -03:00 [INF] HTTP GET /api/city/7/with-hotels responded 404 in 8.1632 ms
2024-07-29 22:46:43.195 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/7/with-hotels - 404 0 null 12.784ms
2024-07-29 22:46:43.199 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7288/api/city/7/with-hotels, Response status code: 404
2024-07-29 22:46:53.684 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/6/with-hotels - application/json 81
2024-07-29 22:46:53.688 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:46:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:46:53.693 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:46:53'.
2024-07-29 22:46:53.694 -03:00 [INF] HTTP GET /api/city/6/with-hotels responded 404 in 6.5473 ms
2024-07-29 22:46:53.696 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/6/with-hotels - 404 0 null 12.4974ms
2024-07-29 22:46:53.699 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7288/api/city/6/with-hotels, Response status code: 404
2024-07-29 22:51:14.318 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 22:51:14.794 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 22:51:14.795 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 22:51:14.797 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 22:51:14.798 -03:00 [INF] Hosting environment: Development
2024-07-29 22:51:14.799 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 22:51:16.780 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 22:51:17.045 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 276.9407ms
2024-07-29 22:51:17.098 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 22:51:17.110 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 12.6152ms
2024-07-29 22:51:17.251 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 22:51:17.670 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 418.884ms
2024-07-29 22:51:19.997 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/6/with-hotels - application/json 81
2024-07-29 22:51:20.299 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:51:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:51:20.387 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:51:20'.
2024-07-29 22:51:20.397 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityWithHotelsById (HotelBookingSystem.Api)'
2024-07-29 22:51:20.463 -03:00 [INF] Route matched with {action = "GetCityWithHotelsById", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCityWithHotelsById(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:51:23.565 -03:00 [INF] Executing command: SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 22:51:23.631 -03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 22:51:23.873 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponseWithNumberOfHotels'.
2024-07-29 22:51:23.907 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.GetCityWithHotelsById (HotelBookingSystem.Api) in 3431.6093ms
2024-07-29 22:51:23.909 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityWithHotelsById (HotelBookingSystem.Api)'
2024-07-29 22:51:23.915 -03:00 [INF] HTTP GET /api/city/6/with-hotels responded 200 in 3893.3192 ms
2024-07-29 22:51:23.924 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/6/with-hotels - 200 null application/json; charset=utf-8 3927.7629ms
2024-07-29 22:51:37.597 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/popular-cities - application/json 81
2024-07-29 22:51:37.605 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:51:37'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:51:37.609 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:51:37'.
2024-07-29 22:51:37.611 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetPopularCities (HotelBookingSystem.Api)'
2024-07-29 22:51:37.616 -03:00 [INF] Route matched with {action = "GetPopularCities", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPopularCities(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:51:37.733 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
ORDER BY "c"."Visitors" DESC
LIMIT @__p_0
2024-07-29 22:51:37.737 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
ORDER BY "c"."Visitors" DESC
LIMIT @__p_0
2024-07-29 22:51:37.757 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelBookingSystem.Application.DTO.CityDTO.CityResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 22:51:37.763 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.GetPopularCities (HotelBookingSystem.Api) in 145.0285ms
2024-07-29 22:51:37.764 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetPopularCities (HotelBookingSystem.Api)'
2024-07-29 22:51:37.766 -03:00 [INF] HTTP GET /api/city/popular-cities responded 200 in 164.3187 ms
2024-07-29 22:51:37.769 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/popular-cities - 200 null application/json; charset=utf-8 171.8439ms
2024-07-29 22:51:51.921 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/city/7 - application/json 81
2024-07-29 22:51:51.929 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:51:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:51:51.932 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:51:51'.
2024-07-29 22:51:51.941 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 22:51:51.949 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 22:51:51.950 -03:00 [INF] HTTP DELETE /api/city/7 responded 401 in 26.9392 ms
2024-07-29 22:51:51.951 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/city/7 - 401 0 null 30.9322ms
2024-07-29 22:52:24.861 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/city/7 - application/json 81
2024-07-29 22:52:24.899 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.DeleteCity (HotelBookingSystem.Api)'
2024-07-29 22:52:24.915 -03:00 [INF] Route matched with {action = "DeleteCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCity(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:52:24.981 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:52:24.983 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:52:25.161 -03:00 [INF] Executing command: DELETE FROM "Cities"
WHERE "CityId" = @p0
RETURNING 1;

2024-07-29 22:52:25.165 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Cities"
WHERE "CityId" = @p0
RETURNING 1;
2024-07-29 22:52:25.189 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-07-29 22:52:25.191 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.DeleteCity (HotelBookingSystem.Api) in 269.9296ms
2024-07-29 22:52:25.193 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.DeleteCity (HotelBookingSystem.Api)'
2024-07-29 22:52:25.195 -03:00 [INF] HTTP DELETE /api/city/7 responded 204 in 329.0037 ms
2024-07-29 22:52:25.199 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/city/7 - 204 null null 339.2081ms
2024-07-29 22:52:50.951 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/city/6 - application/json 150
2024-07-29 22:52:50.955 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:52:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:52:50.960 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:52:50'.
2024-07-29 22:52:50.965 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 22:52:50.967 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 22:52:50.967 -03:00 [INF] HTTP PUT /api/city/6 responded 401 in 14.0885 ms
2024-07-29 22:52:50.969 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/city/6 - 401 0 null 17.7152ms
2024-07-29 22:53:18.259 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/city/6 - application/json 150
2024-07-29 22:53:18.266 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:53:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:53:18.273 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:53:18'.
2024-07-29 22:53:18.275 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 22:53:18.277 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 22:53:18.279 -03:00 [INF] HTTP PUT /api/city/6 responded 401 in 14.0400 ms
2024-07-29 22:53:18.283 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/city/6 - 401 0 null 24.567ms
2024-07-29 22:53:28.358 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/city/6 - application/json 150
2024-07-29 22:53:28.364 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.UpdateCity (HotelBookingSystem.Api)'
2024-07-29 22:53:28.377 -03:00 [INF] Route matched with {action = "UpdateCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCity(Int32, HotelBookingSystem.Application.DTO.CityDTO.CityRequest) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:53:28.485 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:53:28.489 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:53:28.518 -03:00 [INF] Executing command: UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;

2024-07-29 22:53:28.523 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 11), @p3='?' (Size = 5), @p4='?' (Size = 41), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;
2024-07-29 22:53:28.537 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponse'.
2024-07-29 22:53:28.540 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.UpdateCity (HotelBookingSystem.Api) in 157.5937ms
2024-07-29 22:53:28.542 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.UpdateCity (HotelBookingSystem.Api)'
2024-07-29 22:53:28.544 -03:00 [INF] HTTP PUT /api/city/6 responded 200 in 181.5755 ms
2024-07-29 22:53:28.547 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/city/6 - 200 null application/json; charset=utf-8 188.9207ms
