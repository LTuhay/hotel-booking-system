2024-07-29 14:10:48.859 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:10:49.815 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:10:49.819 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:10:49.825 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:10:49.828 -03:00 [INF] Hosting environment: Development
2024-07-29 14:10:49.830 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:10:51.727 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:10:52.368 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 655.544ms
2024-07-29 14:10:52.466 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:10:52.481 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 15.6491ms
2024-07-29 14:10:52.489 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:10:52.641 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 151.4562ms
2024-07-29 14:10:52.784 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:10:52.828 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/favicon-32x32.png - null null
2024-07-29 14:10:52.844 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-07-29 14:10:52.846 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/favicon-32x32.png - 200 628 image/png 18.1661ms
2024-07-29 14:10:52.990 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 205.9326ms
2024-07-29 14:11:37.370 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 72
2024-07-29 14:11:37.496 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:11:37.552 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 14:11:40.458 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:11:40.497 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:11:40.667 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 14:11:40.688 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 3127.1042ms
2024-07-29 14:11:40.690 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:11:40.695 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 3317.0869 ms
2024-07-29 14:11:40.709 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 3339.1303ms
2024-07-29 14:12:23.378 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:12:23.457 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/7/2024 16:52:14', Current time (UTC): '29/7/2024 17:12:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:12:23.520 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/7/2024 16:52:14', Current time (UTC): '29/7/2024 17:12:23'.
2024-07-29 14:12:23.527 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 14:12:23.533 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 14:12:23.534 -03:00 [INF] HTTP GET /api/booking/6/pdf responded 401 in 151.2053 ms
2024-07-29 14:12:23.535 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - 401 0 null 157.6568ms
2024-07-29 14:12:29.500 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:12:29.520 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:12:29.531 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:12:29.798 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:12:29.804 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:13:51.980 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:13:52.291 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:13:52.293 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:13:52.295 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:13:52.295 -03:00 [INF] Hosting environment: Development
2024-07-29 14:13:52.296 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:13:52.866 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:13:53.125 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 265.7545ms
2024-07-29 14:13:53.156 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:13:53.156 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:13:53.172 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 16.8419ms
2024-07-29 14:13:53.236 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.3323ms
2024-07-29 14:13:53.329 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:13:53.486 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 156.8917ms
2024-07-29 14:13:56.903 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:13:57.042 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:13:57.071 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:14:00.121 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:14:00.161 -03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:14:01.131 -03:00 [INF] Executing FileContentResult, sending file with download name 'Booking_6.pdf' ...
2024-07-29 14:14:01.158 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api) in 4077.3691ms
2024-07-29 14:14:01.162 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:14:01.168 -03:00 [INF] HTTP GET /api/booking/6/pdf responded 200 in 4256.0619 ms
2024-07-29 14:14:01.184 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - 200 1331 application/pdf 4280.3413ms
2024-07-29 14:29:33.879 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:29:34.301 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:29:34.303 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:29:34.305 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:29:34.305 -03:00 [INF] Hosting environment: Development
2024-07-29 14:29:34.306 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:29:35.853 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:29:36.226 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 379.2434ms
2024-07-29 14:29:36.252 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:29:36.266 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 14.2923ms
2024-07-29 14:29:36.280 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:29:36.394 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.3977ms
2024-07-29 14:29:36.492 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:29:36.751 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.8717ms
2024-07-29 14:31:32.806 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/booking - application/json 163
2024-07-29 14:31:33.135 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 14:31:33.208 -03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingSystem.Application.DTO.BookingDTO.BookingRequest) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:31:36.564 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:31:36.616 -03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:31:36.895 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-07-29 14:31:36.905 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:31:36.911 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:31:37.023 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 14:31:37.026 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 14:31:37.348 -03:00 [INF] Executing command: INSERT INTO "Bookings" ("CheckInDate", "CheckOutDate", "HotelId", "RoomId", "SpecialRequests", "TotalPrice", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "BookingId";

2024-07-29 14:31:37.354 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 23), @p5='?' (DbType = Decimal), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("CheckInDate", "CheckOutDate", "HotelId", "RoomId", "SpecialRequests", "TotalPrice", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "BookingId";
2024-07-29 14:31:37.404 -03:00 [INF] Executing command: SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:31:37.406 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:31:37.432 -03:00 [INF] Executing command: UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;

2024-07-29 14:31:37.436 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 8), @p3='?' (Size = 5), @p4='?', @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;
2024-07-29 14:31:37.540 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 14:31:37.582 -03:00 [INF] Email sent successfully to john.doe@example.com
2024-07-29 14:31:37.624 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api) in 4406.1718ms
2024-07-29 14:31:37.626 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 14:31:37.630 -03:00 [INF] HTTP POST /api/booking responded 201 in 4811.1125 ms
2024-07-29 14:31:37.645 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/booking - 201 null application/json; charset=utf-8 4839.7739ms
