2024-07-29 14:10:48.859 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:10:49.815 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:10:49.819 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:10:49.825 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:10:49.828 -03:00 [INF] Hosting environment: Development
2024-07-29 14:10:49.830 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:10:51.727 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:10:52.368 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 655.544ms
2024-07-29 14:10:52.466 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:10:52.481 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 15.6491ms
2024-07-29 14:10:52.489 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:10:52.641 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 151.4562ms
2024-07-29 14:10:52.784 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:10:52.828 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/favicon-32x32.png - null null
2024-07-29 14:10:52.844 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-07-29 14:10:52.846 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/favicon-32x32.png - 200 628 image/png 18.1661ms
2024-07-29 14:10:52.990 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 205.9326ms
2024-07-29 14:11:37.370 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 72
2024-07-29 14:11:37.496 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:11:37.552 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 14:11:40.458 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:11:40.497 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:11:40.667 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 14:11:40.688 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 3127.1042ms
2024-07-29 14:11:40.690 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:11:40.695 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 3317.0869 ms
2024-07-29 14:11:40.709 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 3339.1303ms
2024-07-29 14:12:23.378 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:12:23.457 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/7/2024 16:52:14', Current time (UTC): '29/7/2024 17:12:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:12:23.520 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/7/2024 16:52:14', Current time (UTC): '29/7/2024 17:12:23'.
2024-07-29 14:12:23.527 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 14:12:23.533 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 14:12:23.534 -03:00 [INF] HTTP GET /api/booking/6/pdf responded 401 in 151.2053 ms
2024-07-29 14:12:23.535 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - 401 0 null 157.6568ms
2024-07-29 14:12:29.500 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:12:29.520 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:12:29.531 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:12:29.798 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:12:29.804 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:13:51.980 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:13:52.291 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:13:52.293 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:13:52.295 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:13:52.295 -03:00 [INF] Hosting environment: Development
2024-07-29 14:13:52.296 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:13:52.866 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:13:53.125 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 265.7545ms
2024-07-29 14:13:53.156 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:13:53.156 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:13:53.172 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 16.8419ms
2024-07-29 14:13:53.236 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.3323ms
2024-07-29 14:13:53.329 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:13:53.486 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 156.8917ms
2024-07-29 14:13:56.903 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:13:57.042 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:13:57.071 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:14:00.121 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:14:00.161 -03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:14:01.131 -03:00 [INF] Executing FileContentResult, sending file with download name 'Booking_6.pdf' ...
2024-07-29 14:14:01.158 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api) in 4077.3691ms
2024-07-29 14:14:01.162 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:14:01.168 -03:00 [INF] HTTP GET /api/booking/6/pdf responded 200 in 4256.0619 ms
2024-07-29 14:14:01.184 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - 200 1331 application/pdf 4280.3413ms
2024-07-29 14:29:33.879 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:29:34.301 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:29:34.303 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:29:34.305 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:29:34.305 -03:00 [INF] Hosting environment: Development
2024-07-29 14:29:34.306 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:29:35.853 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:29:36.226 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 379.2434ms
2024-07-29 14:29:36.252 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:29:36.266 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 14.2923ms
2024-07-29 14:29:36.280 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:29:36.394 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.3977ms
2024-07-29 14:29:36.492 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:29:36.751 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.8717ms
2024-07-29 14:31:32.806 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/booking - application/json 163
2024-07-29 14:31:33.135 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 14:31:33.208 -03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingSystem.Application.DTO.BookingDTO.BookingRequest) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:31:36.564 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:31:36.616 -03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:31:36.895 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-07-29 14:31:36.905 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:31:36.911 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:31:37.023 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 14:31:37.026 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 14:31:37.348 -03:00 [INF] Executing command: INSERT INTO "Bookings" ("CheckInDate", "CheckOutDate", "HotelId", "RoomId", "SpecialRequests", "TotalPrice", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "BookingId";

2024-07-29 14:31:37.354 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 23), @p5='?' (DbType = Decimal), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("CheckInDate", "CheckOutDate", "HotelId", "RoomId", "SpecialRequests", "TotalPrice", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "BookingId";
2024-07-29 14:31:37.404 -03:00 [INF] Executing command: SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:31:37.406 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:31:37.432 -03:00 [INF] Executing command: UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;

2024-07-29 14:31:37.436 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 8), @p3='?' (Size = 5), @p4='?', @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;
2024-07-29 14:31:37.540 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 14:31:37.582 -03:00 [INF] Email sent successfully to john.doe@example.com
2024-07-29 14:31:37.624 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api) in 4406.1718ms
2024-07-29 14:31:37.626 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 14:31:37.630 -03:00 [INF] HTTP POST /api/booking responded 201 in 4811.1125 ms
2024-07-29 14:31:37.645 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/booking - 201 null application/json; charset=utf-8 4839.7739ms
2024-07-29 14:43:28.449 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 14:43:28.734 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 14:43:28.735 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 14:43:28.737 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 14:43:28.738 -03:00 [INF] Hosting environment: Development
2024-07-29 14:43:28.739 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 14:43:29.870 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 14:43:30.386 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 527.4355ms
2024-07-29 14:43:30.393 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 14:43:30.406 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 13.2518ms
2024-07-29 14:43:30.414 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 14:43:30.507 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.0191ms
2024-07-29 14:43:30.611 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 14:43:30.829 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.8815ms
2024-07-29 14:43:38.604 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 72
2024-07-29 14:43:38.778 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:43:38.843 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 14:43:41.243 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:43:41.287 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 14:43:41.471 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 14:43:41.485 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 2632.3615ms
2024-07-29 14:43:41.487 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 14:43:41.490 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 2869.5068 ms
2024-07-29 14:43:41.506 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 2901.7094ms
2024-07-29 14:43:50.950 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/6 - application/json 81
2024-07-29 14:43:51.048 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 03:40:18', Current time (UTC): '29/7/2024 17:43:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:43:51.107 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 03:40:18', Current time (UTC): '29/7/2024 17:43:51'.
2024-07-29 14:43:51.108 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api)'
2024-07-29 14:43:51.116 -03:00 [INF] Route matched with {action = "GetCityById", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCityById(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 14:43:51.302 -03:00 [INF] Executing command: SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:43:51.306 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 14:43:51.401 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponse'.
2024-07-29 14:43:51.420 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api) in 301.9798ms
2024-07-29 14:43:51.422 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api)'
2024-07-29 14:43:51.425 -03:00 [INF] HTTP GET /api/city/6 responded 200 in 467.8865 ms
2024-07-29 14:43:51.426 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/6 - 200 null application/json; charset=utf-8 476.2692ms
2024-07-29 14:43:57.475 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/10 - application/json 251
2024-07-29 14:43:57.484 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 14:43:57.493 -03:00 [INF] Route matched with {action = "GetHotelById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelById(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 14:43:57.569 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-07-29 14:43:57.579 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:43:57.581 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId" AS "HotelId0", "b"."RoomId" AS "RoomId0", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
    FROM "Rooms" AS "r"
    LEFT JOIN "Bookings" AS "b" ON "r"."RoomId" = "b"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:43:57.654 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse'.
2024-07-29 14:43:57.680 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api) in 183.3275ms
2024-07-29 14:43:57.684 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 14:43:57.686 -03:00 [INF] HTTP GET /api/hotel/10 responded 200 in 205.7508 ms
2024-07-29 14:43:57.688 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/10 - 200 null application/json; charset=utf-8 213.3811ms
2024-07-29 14:44:04.870 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/search?Query=Resort&CheckInDate=2024-08-01&CheckOutDate=2024-08-07 - null null
2024-07-29 14:44:04.878 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '29/7/2024 17:44:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:44:04.886 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '29/7/2024 17:44:04'.
2024-07-29 14:44:04.888 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 14:44:04.907 -03:00 [INF] Route matched with {action = "Search", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HotelBookingSystem.Application.DTO.HotelDTO.HotelSearchParameters) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 14:44:05.191 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Hotels" AS "h"
INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
WHERE (instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r"
    WHERE "h"."HotelId" = "r"."HotelId" AND NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_1 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_2)) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r0"
    WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."AdultCapacity" >= @__searchParameters_Adults_3) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r1"
    WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."ChildCapacity" >= @__searchParameters_Children_4)
2024-07-29 14:44:05.195 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchParameters_Query_0='?' (Size = 6), @__searchParameters_CheckInDate_1='?' (DbType = DateTime), @__searchParameters_CheckOutDate_2='?' (DbType = DateTime), @__searchParameters_Adults_3='?' (DbType = Int32), @__searchParameters_Children_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Hotels" AS "h"
INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
WHERE (instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r"
    WHERE "h"."HotelId" = "r"."HotelId" AND NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_1 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_2)) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r0"
    WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."AdultCapacity" >= @__searchParameters_Adults_3) AND EXISTS (
    SELECT 1
    FROM "Rooms" AS "r1"
    WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."ChildCapacity" >= @__searchParameters_Children_4)
2024-07-29 14:44:05.219 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 14:44:05.221 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 14:44:05.249 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-07-29 14:44:05.265 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."CityId0", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "c"."CityId" AS "CityId0"
    FROM "Hotels" AS "h"
    INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
    WHERE (instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r"
        WHERE "h"."HotelId" = "r"."HotelId" AND NOT EXISTS (
            SELECT 1
            FROM "Bookings" AS "b"
            WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_1 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_2)) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r0"
        WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."AdultCapacity" >= @__searchParameters_Adults_3) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r1"
        WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."ChildCapacity" >= @__searchParameters_Children_4)
    LIMIT @__p_6 OFFSET @__p_5
) AS "t"
LEFT JOIN (
    SELECT "r2"."RoomId", "r2"."AdultCapacity", "r2"."ChildCapacity", "r2"."CreatedAt", "r2"."DiscountedPrice", "r2"."FeaturedDeal", "r2"."HotelId", "r2"."ImagesUrl", "r2"."PricePerNight", "r2"."RoomType", "r2"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId" AS "HotelId0", "b0"."RoomId" AS "RoomId0", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
    FROM "Rooms" AS "r2"
    LEFT JOIN "Bookings" AS "b0" ON "r2"."RoomId" = "b0"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t"."CityId0", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:44:05.274 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchParameters_Query_0='?' (Size = 6), @__searchParameters_CheckInDate_1='?' (DbType = DateTime), @__searchParameters_CheckOutDate_2='?' (DbType = DateTime), @__searchParameters_Adults_3='?' (DbType = Int32), @__searchParameters_Children_4='?' (DbType = Int32), @__p_6='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."CityId0", "t0"."RoomId", "t0"."AdultCapacity", "t0"."ChildCapacity", "t0"."CreatedAt", "t0"."DiscountedPrice", "t0"."FeaturedDeal", "t0"."HotelId", "t0"."ImagesUrl", "t0"."PricePerNight", "t0"."RoomType", "t0"."UpdatedAt", "t0"."BookingId", "t0"."CheckInDate", "t0"."CheckOutDate", "t0"."HotelId0", "t0"."RoomId0", "t0"."SpecialRequests", "t0"."TotalPrice", "t0"."UserId", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "c"."CityId" AS "CityId0"
    FROM "Hotels" AS "h"
    INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
    WHERE (instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r"
        WHERE "h"."HotelId" = "r"."HotelId" AND NOT EXISTS (
            SELECT 1
            FROM "Bookings" AS "b"
            WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_1 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_2)) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r0"
        WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."AdultCapacity" >= @__searchParameters_Adults_3) AND EXISTS (
        SELECT 1
        FROM "Rooms" AS "r1"
        WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."ChildCapacity" >= @__searchParameters_Children_4)
    LIMIT @__p_6 OFFSET @__p_5
) AS "t"
LEFT JOIN (
    SELECT "r2"."RoomId", "r2"."AdultCapacity", "r2"."ChildCapacity", "r2"."CreatedAt", "r2"."DiscountedPrice", "r2"."FeaturedDeal", "r2"."HotelId", "r2"."ImagesUrl", "r2"."PricePerNight", "r2"."RoomType", "r2"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId" AS "HotelId0", "b0"."RoomId" AS "RoomId0", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
    FROM "Rooms" AS "r2"
    LEFT JOIN "Bookings" AS "b0" ON "r2"."RoomId" = "b0"."RoomId"
) AS "t0" ON "t"."HotelId" = "t0"."HotelId"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId", "t"."CityId0", "t0"."RoomId", "t0"."BookingId"
2024-07-29 14:44:05.330 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 14:44:05.336 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api) in 425.463ms
2024-07-29 14:44:05.338 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 14:44:05.339 -03:00 [INF] HTTP GET /api/hotel/search responded 200 in 462.4526 ms
2024-07-29 14:44:05.343 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/search?Query=Resort&CheckInDate=2024-08-01&CheckOutDate=2024-08-07 - 200 null application/json; charset=utf-8 472.1989ms
2024-07-29 14:44:11.556 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/15 - application/json 281
2024-07-29 14:44:11.559 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 18:52:08', Current time (UTC): '29/7/2024 17:44:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 14:44:11.563 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 18:52:08', Current time (UTC): '29/7/2024 17:44:11'.
2024-07-29 14:44:11.564 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api)'
2024-07-29 14:44:11.570 -03:00 [INF] Route matched with {action = "GetRoomById", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomById(Int32) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 14:44:11.588 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:44:11.589 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 14:44:11.595 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse'.
2024-07-29 14:44:11.597 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api) in 25.6337ms
2024-07-29 14:44:11.598 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api)'
2024-07-29 14:44:11.599 -03:00 [INF] HTTP GET /api/room/15 responded 200 in 40.5932 ms
2024-07-29 14:44:11.600 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/15 - 200 null application/json; charset=utf-8 44.474ms
2024-07-29 14:44:20.630 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/3 - null null
2024-07-29 14:44:20.660 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 14:44:20.669 -03:00 [INF] Route matched with {action = "GetBookingDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingDetails(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:44:20.787 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:44:20.791 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:44:20.836 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 14:44:20.845 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api) in 174.4165ms
2024-07-29 14:44:20.848 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 14:44:20.853 -03:00 [INF] HTTP GET /api/booking/3 responded 200 in 219.9190 ms
2024-07-29 14:44:20.858 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/3 - 200 null application/json; charset=utf-8 228.204ms
2024-07-29 14:44:27.564 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - null null
2024-07-29 14:44:27.571 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:44:27.576 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 14:44:27.584 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:44:27.586 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 14:44:28.472 -03:00 [INF] Executing FileContentResult, sending file with download name 'Booking_6.pdf' ...
2024-07-29 14:44:28.485 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api) in 907.442ms
2024-07-29 14:44:28.487 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 14:44:28.490 -03:00 [INF] HTTP GET /api/booking/6/pdf responded 200 in 922.7790 ms
2024-07-29 14:44:28.493 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/6/pdf - 200 1331 application/pdf 929.2125ms
2024-07-29 14:44:43.363 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/payment/1 - null null
2024-07-29 14:44:43.367 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api)'
2024-07-29 14:44:43.371 -03:00 [INF] Route matched with {action = "GetPaymentDetails", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaymentDetails(Int32) on controller HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController (HotelBookingSystem.Api).
2024-07-29 14:44:43.404 -03:00 [INF] Executing command: SELECT "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status"
FROM "Payments" AS "p"
WHERE "p"."PaymentId" = @__p_0
LIMIT 1
2024-07-29 14:44:43.406 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status"
FROM "Payments" AS "p"
WHERE "p"."PaymentId" = @__p_0
LIMIT 1
2024-07-29 14:44:43.414 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.PaymentDTO.PaymentResponse'.
2024-07-29 14:44:43.416 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api) in 42.8985ms
2024-07-29 14:44:43.418 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api)'
2024-07-29 14:44:43.420 -03:00 [INF] HTTP GET /api/payment/1 responded 200 in 54.5260 ms
2024-07-29 14:44:43.422 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/payment/1 - 200 null application/json; charset=utf-8 58.5887ms
2024-07-29 22:42:09.747 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 22:42:10.577 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 22:42:10.578 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 22:42:10.581 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 22:42:10.582 -03:00 [INF] Hosting environment: Development
2024-07-29 22:42:10.583 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 22:42:12.155 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 22:42:12.442 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 297.4136ms
2024-07-29 22:42:12.530 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 22:42:12.545 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 13.0942ms
2024-07-29 22:42:12.675 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 22:42:12.923 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 247.137ms
2024-07-29 22:42:48.142 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/ - application/json 291
2024-07-29 22:42:48.276 -03:00 [INF] HTTP POST /api/auth/ responded 404 in 122.3204 ms
2024-07-29 22:42:48.299 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/ - 404 0 null 156.7723ms
2024-07-29 22:42:48.308 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7288/api/auth/, Response status code: 404
2024-07-29 22:43:01.804 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 72
2024-07-29 22:43:01.821 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 22:43:01.886 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 22:43:04.884 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:43:04.942 -03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__email_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:43:05.158 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 22:43:05.174 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 3280.4273ms
2024-07-29 22:43:05.178 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 22:43:05.180 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 3369.3538 ms
2024-07-29 22:43:05.191 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 3387.4251ms
2024-07-29 22:43:44.452 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 22:43:44.737 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 22:43:44.740 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 22:43:44.742 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 22:43:44.743 -03:00 [INF] Hosting environment: Development
2024-07-29 22:43:44.744 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 22:43:45.692 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 22:43:45.926 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 249.0347ms
2024-07-29 22:43:46.031 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 22:43:46.048 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 16.7971ms
2024-07-29 22:43:46.163 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 22:43:46.359 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 196.5335ms
2024-07-29 22:43:52.990 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/ - application/json 291
2024-07-29 22:43:53.157 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api)'
2024-07-29 22:43:53.180 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HotelBookingSystem.Application.DTO.UserDTO.UserRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 22:43:55.749 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:43:55.810 -03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__email_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:43:56.122 -03:00 [INF] Executing command: INSERT INTO "Users" ("Address", "City", "Country", "DateOfBirth", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Role")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "UserId";

2024-07-29 22:43:56.124 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 11), @p1='?' (Size = 11), @p2='?' (Size = 3), @p3='?' (DbType = DateTime), @p4='?' (Size = 16), @p5='?' (Size = 4), @p6='?' (Size = 5), @p7='?' (Size = 88), @p8='?' (Size = 11), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Address", "City", "Country", "DateOfBirth", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Role")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "UserId";
2024-07-29 22:43:56.180 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[HotelBookingSystem.Application.DTO.UserDTO.UserResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 22:43:56.202 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api) in 3013.1725ms
2024-07-29 22:43:56.204 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api)'
2024-07-29 22:43:56.207 -03:00 [INF] HTTP POST /api/auth/ responded 200 in 3195.1202 ms
2024-07-29 22:43:56.217 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/ - 200 null application/json; charset=utf-8 3227.6202ms
2024-07-29 22:45:21.477 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth - application/json 296
2024-07-29 22:45:21.497 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api)'
2024-07-29 22:45:21.511 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HotelBookingSystem.Application.DTO.UserDTO.UserRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 22:45:21.598 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:45:21.600 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 24)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:45:21.610 -03:00 [INF] Executing command: INSERT INTO "Users" ("Address", "City", "Country", "DateOfBirth", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Role")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "UserId";

2024-07-29 22:45:21.613 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 11), @p1='?' (Size = 11), @p2='?' (Size = 3), @p3='?' (DbType = DateTime), @p4='?' (Size = 24), @p5='?' (Size = 5), @p6='?' (Size = 4), @p7='?' (Size = 88), @p8='?' (Size = 11), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Address", "City", "Country", "DateOfBirth", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Role")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "UserId";
2024-07-29 22:45:22.026 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[HotelBookingSystem.Application.DTO.UserDTO.UserResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 22:45:22.031 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api) in 514.3843ms
2024-07-29 22:45:22.036 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Register (HotelBookingSystem.Api)'
2024-07-29 22:45:22.037 -03:00 [INF] HTTP POST /api/auth responded 200 in 543.6920 ms
2024-07-29 22:45:22.042 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth - 200 null application/json; charset=utf-8 566.8934ms
2024-07-29 22:45:31.802 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 74
2024-07-29 22:45:31.808 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 22:45:31.819 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 22:45:31.848 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:45:31.851 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 22:45:31.930 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 22:45:31.936 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 113.8419ms
2024-07-29 22:45:31.938 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 22:45:31.939 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 133.0316 ms
2024-07-29 22:45:31.940 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 138.3433ms
2024-07-29 22:45:52.295 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/city - application/json 150
2024-07-29 22:45:52.411 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 18:58:10', Current time (UTC): '30/7/2024 01:45:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:45:52.888 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 18:58:10', Current time (UTC): '30/7/2024 01:45:52'.
2024-07-29 22:45:52.936 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 22:45:52.945 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 22:45:52.946 -03:00 [INF] HTTP POST /api/city responded 401 in 645.1095 ms
2024-07-29 22:45:52.948 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/city - 401 0 null 653.0512ms
2024-07-29 22:46:22.256 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/city - application/json 150
2024-07-29 22:46:22.288 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.CreateCity (HotelBookingSystem.Api)'
2024-07-29 22:46:22.295 -03:00 [INF] Route matched with {action = "CreateCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCity(HotelBookingSystem.Application.DTO.CityDTO.CityRequest) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:46:22.343 -03:00 [INF] Executing command: INSERT INTO "Cities" ("Country", "CreatedAt", "Name", "PostOffice", "ThumbnailUrl", "UpdatedAt", "Visitors")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "CityId";

2024-07-29 22:46:22.346 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 11), @p3='?' (Size = 5), @p4='?' (Size = 41), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Country", "CreatedAt", "Name", "PostOffice", "ThumbnailUrl", "UpdatedAt", "Visitors")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "CityId";
2024-07-29 22:46:22.371 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponse'.
2024-07-29 22:46:22.421 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.CreateCity (HotelBookingSystem.Api) in 123.5503ms
2024-07-29 22:46:22.424 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.CreateCity (HotelBookingSystem.Api)'
2024-07-29 22:46:22.426 -03:00 [INF] HTTP POST /api/city responded 201 in 162.1066 ms
2024-07-29 22:46:22.428 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/city - 201 null application/json; charset=utf-8 171.9059ms
2024-07-29 22:46:32.213 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/7 - application/json 81
2024-07-29 22:46:32.218 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 03:40:18', Current time (UTC): '30/7/2024 01:46:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:46:32.225 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 03:40:18', Current time (UTC): '30/7/2024 01:46:32'.
2024-07-29 22:46:32.228 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api)'
2024-07-29 22:46:32.234 -03:00 [INF] Route matched with {action = "GetCityById", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCityById(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:46:32.277 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:46:32.279 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:46:32.282 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponse'.
2024-07-29 22:46:32.286 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api) in 48.6129ms
2024-07-29 22:46:32.288 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityById (HotelBookingSystem.Api)'
2024-07-29 22:46:32.289 -03:00 [INF] HTTP GET /api/city/7 responded 200 in 72.9323 ms
2024-07-29 22:46:32.291 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/7 - 200 null application/json; charset=utf-8 78.5155ms
2024-07-29 22:46:43.183 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/7/with-hotels - application/json 81
2024-07-29 22:46:43.185 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:46:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:46:43.191 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:46:43'.
2024-07-29 22:46:43.193 -03:00 [INF] HTTP GET /api/city/7/with-hotels responded 404 in 8.1632 ms
2024-07-29 22:46:43.195 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/7/with-hotels - 404 0 null 12.784ms
2024-07-29 22:46:43.199 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7288/api/city/7/with-hotels, Response status code: 404
2024-07-29 22:46:53.684 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/6/with-hotels - application/json 81
2024-07-29 22:46:53.688 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:46:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:46:53.693 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:46:53'.
2024-07-29 22:46:53.694 -03:00 [INF] HTTP GET /api/city/6/with-hotels responded 404 in 6.5473 ms
2024-07-29 22:46:53.696 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/6/with-hotels - 404 0 null 12.4974ms
2024-07-29 22:46:53.699 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7288/api/city/6/with-hotels, Response status code: 404
2024-07-29 22:51:14.318 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 22:51:14.794 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 22:51:14.795 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 22:51:14.797 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 22:51:14.798 -03:00 [INF] Hosting environment: Development
2024-07-29 22:51:14.799 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 22:51:16.780 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 22:51:17.045 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 276.9407ms
2024-07-29 22:51:17.098 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 22:51:17.110 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 12.6152ms
2024-07-29 22:51:17.251 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 22:51:17.670 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 418.884ms
2024-07-29 22:51:19.997 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/6/with-hotels - application/json 81
2024-07-29 22:51:20.299 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:51:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:51:20.387 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:51:20'.
2024-07-29 22:51:20.397 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityWithHotelsById (HotelBookingSystem.Api)'
2024-07-29 22:51:20.463 -03:00 [INF] Route matched with {action = "GetCityWithHotelsById", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCityWithHotelsById(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:51:23.565 -03:00 [INF] Executing command: SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 22:51:23.631 -03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."CityId", "t"."Country", "t"."CreatedAt", "t"."Name", "t"."PostOffice", "t"."ThumbnailUrl", "t"."UpdatedAt", "t"."Visitors", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM (
    SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
    FROM "Cities" AS "c"
    WHERE "c"."CityId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Hotels" AS "h" ON "t"."CityId" = "h"."CityId"
ORDER BY "t"."CityId"
2024-07-29 22:51:23.873 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponseWithNumberOfHotels'.
2024-07-29 22:51:23.907 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.GetCityWithHotelsById (HotelBookingSystem.Api) in 3431.6093ms
2024-07-29 22:51:23.909 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetCityWithHotelsById (HotelBookingSystem.Api)'
2024-07-29 22:51:23.915 -03:00 [INF] HTTP GET /api/city/6/with-hotels responded 200 in 3893.3192 ms
2024-07-29 22:51:23.924 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/6/with-hotels - 200 null application/json; charset=utf-8 3927.7629ms
2024-07-29 22:51:37.597 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/city/popular-cities - application/json 81
2024-07-29 22:51:37.605 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:51:37'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:51:37.609 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:18:30', Current time (UTC): '30/7/2024 01:51:37'.
2024-07-29 22:51:37.611 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetPopularCities (HotelBookingSystem.Api)'
2024-07-29 22:51:37.616 -03:00 [INF] Route matched with {action = "GetPopularCities", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPopularCities(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:51:37.733 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
ORDER BY "c"."Visitors" DESC
LIMIT @__p_0
2024-07-29 22:51:37.737 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
ORDER BY "c"."Visitors" DESC
LIMIT @__p_0
2024-07-29 22:51:37.757 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelBookingSystem.Application.DTO.CityDTO.CityResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 22:51:37.763 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.GetPopularCities (HotelBookingSystem.Api) in 145.0285ms
2024-07-29 22:51:37.764 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.GetPopularCities (HotelBookingSystem.Api)'
2024-07-29 22:51:37.766 -03:00 [INF] HTTP GET /api/city/popular-cities responded 200 in 164.3187 ms
2024-07-29 22:51:37.769 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/city/popular-cities - 200 null application/json; charset=utf-8 171.8439ms
2024-07-29 22:51:51.921 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/city/7 - application/json 81
2024-07-29 22:51:51.929 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:51:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:51:51.932 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:51:51'.
2024-07-29 22:51:51.941 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 22:51:51.949 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 22:51:51.950 -03:00 [INF] HTTP DELETE /api/city/7 responded 401 in 26.9392 ms
2024-07-29 22:51:51.951 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/city/7 - 401 0 null 30.9322ms
2024-07-29 22:52:24.861 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/city/7 - application/json 81
2024-07-29 22:52:24.899 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.DeleteCity (HotelBookingSystem.Api)'
2024-07-29 22:52:24.915 -03:00 [INF] Route matched with {action = "DeleteCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCity(Int32) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:52:24.981 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:52:24.983 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:52:25.161 -03:00 [INF] Executing command: DELETE FROM "Cities"
WHERE "CityId" = @p0
RETURNING 1;

2024-07-29 22:52:25.165 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Cities"
WHERE "CityId" = @p0
RETURNING 1;
2024-07-29 22:52:25.189 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-07-29 22:52:25.191 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.DeleteCity (HotelBookingSystem.Api) in 269.9296ms
2024-07-29 22:52:25.193 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.DeleteCity (HotelBookingSystem.Api)'
2024-07-29 22:52:25.195 -03:00 [INF] HTTP DELETE /api/city/7 responded 204 in 329.0037 ms
2024-07-29 22:52:25.199 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/city/7 - 204 null null 339.2081ms
2024-07-29 22:52:50.951 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/city/6 - application/json 150
2024-07-29 22:52:50.955 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:52:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:52:50.960 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:52:50'.
2024-07-29 22:52:50.965 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 22:52:50.967 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 22:52:50.967 -03:00 [INF] HTTP PUT /api/city/6 responded 401 in 14.0885 ms
2024-07-29 22:52:50.969 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/city/6 - 401 0 null 17.7152ms
2024-07-29 22:53:18.259 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/city/6 - application/json 150
2024-07-29 22:53:18.266 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:53:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 22:53:18.273 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 20:02:27', Current time (UTC): '30/7/2024 01:53:18'.
2024-07-29 22:53:18.275 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 22:53:18.277 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 22:53:18.279 -03:00 [INF] HTTP PUT /api/city/6 responded 401 in 14.0400 ms
2024-07-29 22:53:18.283 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/city/6 - 401 0 null 24.567ms
2024-07-29 22:53:28.358 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/city/6 - application/json 150
2024-07-29 22:53:28.364 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.CityController.UpdateCity (HotelBookingSystem.Api)'
2024-07-29 22:53:28.377 -03:00 [INF] Route matched with {action = "UpdateCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCity(Int32, HotelBookingSystem.Application.DTO.CityDTO.CityRequest) on controller HotelBookingSystem.Api.Controllers.CityController (HotelBookingSystem.Api).
2024-07-29 22:53:28.485 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:53:28.489 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 22:53:28.518 -03:00 [INF] Executing command: UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;

2024-07-29 22:53:28.523 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 11), @p3='?' (Size = 5), @p4='?' (Size = 41), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;
2024-07-29 22:53:28.537 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.CityDTO.CityResponse'.
2024-07-29 22:53:28.540 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.CityController.UpdateCity (HotelBookingSystem.Api) in 157.5937ms
2024-07-29 22:53:28.542 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.CityController.UpdateCity (HotelBookingSystem.Api)'
2024-07-29 22:53:28.544 -03:00 [INF] HTTP PUT /api/city/6 responded 200 in 181.5755 ms
2024-07-29 22:53:28.547 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/city/6 - 200 null application/json; charset=utf-8 188.9207ms
2024-07-29 23:31:03.615 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:31:04.203 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:31:04.204 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:31:04.206 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:31:04.208 -03:00 [INF] Hosting environment: Development
2024-07-29 23:31:04.208 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:31:06.632 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:31:07.242 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 618.9169ms
2024-07-29 23:31:07.374 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:31:07.389 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 15.5693ms
2024-07-29 23:31:07.393 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:31:07.603 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 210.8496ms
2024-07-29 23:31:07.729 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:31:07.991 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 261.8252ms
2024-07-29 23:31:25.755 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 74
2024-07-29 23:31:25.871 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 23:31:25.913 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 23:31:27.607 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 23:31:27.638 -03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__email_0='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 23:31:27.818 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 23:31:27.832 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 1913.7868ms
2024-07-29 23:31:27.833 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 23:31:27.836 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 2071.9167 ms
2024-07-29 23:31:27.848 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 2092.7055ms
2024-07-29 23:31:47.321 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/hotel - application/json 399
2024-07-29 23:31:47.372 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.CreateHotel (HotelBookingSystem.Api)'
2024-07-29 23:31:47.382 -03:00 [INF] Route matched with {action = "CreateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateHotel(HotelBookingSystem.Application.DTO.HotelDTO.HotelRequest) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:31:47.515 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 23:31:47.519 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 23:31:47.696 -03:00 [INF] Executing command: INSERT INTO "Hotels" ("Address", "Amenities", "CityId", "CreatedAt", "Description", "HotelType", "Name", "Owner", "StarRating", "ThumbnailUrl", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "HotelId";

2024-07-29 23:31:47.700 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 15), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 66), @p5='?' (DbType = Int32), @p6='?' (Size = 15), @p7='?' (Size = 14), @p8='?' (DbType = Int32), @p9='?' (Size = 45), @p10='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Hotels" ("Address", "Amenities", "CityId", "CreatedAt", "Description", "HotelType", "Name", "Owner", "StarRating", "ThumbnailUrl", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "HotelId";
2024-07-29 23:31:47.738 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse'.
2024-07-29 23:31:47.772 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.CreateHotel (HotelBookingSystem.Api) in 386.7829ms
2024-07-29 23:31:47.778 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.CreateHotel (HotelBookingSystem.Api)'
2024-07-29 23:31:47.781 -03:00 [INF] HTTP POST /api/hotel responded 201 in 457.2352 ms
2024-07-29 23:31:47.782 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/hotel - 201 null application/json; charset=utf-8 461.6359ms
2024-07-29 23:32:27.041 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/hotel/8 - application/json 399
2024-07-29 23:32:27.057 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 01:41:27', Current time (UTC): '30/7/2024 02:32:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:32:27.239 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 01:41:27', Current time (UTC): '30/7/2024 02:32:27'.
2024-07-29 23:32:27.242 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 23:32:27.254 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:32:27.254 -03:00 [INF] HTTP PUT /api/hotel/8 responded 401 in 208.1711 ms
2024-07-29 23:32:27.256 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/hotel/8 - 401 0 null 215.5494ms
2024-07-29 23:32:39.393 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/hotel/8 - application/json 399
2024-07-29 23:32:39.401 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.UpdateHotel (HotelBookingSystem.Api)'
2024-07-29 23:32:39.407 -03:00 [INF] Route matched with {action = "UpdateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateHotel(Int32, HotelBookingSystem.Application.DTO.HotelDTO.HotelRequest) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:32:39.440 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:32:39.445 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:32:39.458 -03:00 [INF] Executing command: UPDATE "Hotels" SET "Address" = @p0, "Amenities" = @p1, "CityId" = @p2, "CreatedAt" = @p3, "Description" = @p4, "HotelType" = @p5, "Name" = @p6, "Owner" = @p7, "StarRating" = @p8, "ThumbnailUrl" = @p9, "UpdatedAt" = @p10
WHERE "HotelId" = @p11
RETURNING 1;

2024-07-29 23:32:39.462 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 15), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 66), @p5='?' (DbType = Int32), @p6='?' (Size = 15), @p7='?' (Size = 14), @p8='?' (DbType = Int32), @p9='?' (Size = 45), @p10='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Hotels" SET "Address" = @p0, "Amenities" = @p1, "CityId" = @p2, "CreatedAt" = @p3, "Description" = @p4, "HotelType" = @p5, "Name" = @p6, "Owner" = @p7, "StarRating" = @p8, "ThumbnailUrl" = @p9, "UpdatedAt" = @p10
WHERE "HotelId" = @p11
RETURNING 1;
2024-07-29 23:32:39.475 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse'.
2024-07-29 23:32:39.479 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.UpdateHotel (HotelBookingSystem.Api) in 69.9453ms
2024-07-29 23:32:39.482 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.UpdateHotel (HotelBookingSystem.Api)'
2024-07-29 23:32:39.484 -03:00 [INF] HTTP PUT /api/hotel/8 responded 200 in 87.1112 ms
2024-07-29 23:32:39.486 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/hotel/8 - 200 null application/json; charset=utf-8 93.1526ms
2024-07-29 23:32:49.214 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/11 - application/json 251
2024-07-29 23:32:49.217 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 23:32:49.221 -03:00 [INF] Route matched with {action = "GetHotelById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelById(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:32:49.234 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:32:49.238 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:32:49.244 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse'.
2024-07-29 23:32:49.245 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api) in 21.5525ms
2024-07-29 23:32:49.247 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 23:32:49.248 -03:00 [INF] HTTP GET /api/hotel/11 responded 200 in 31.4956 ms
2024-07-29 23:32:49.250 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/11 - 200 null application/json; charset=utf-8 35.7633ms
2024-07-29 23:33:26.014 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/11 - application/json 251
2024-07-29 23:33:26.019 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 23:33:26.021 -03:00 [INF] Route matched with {action = "GetHotelById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelById(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:33:26.025 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:33:26.032 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:33:26.037 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse'.
2024-07-29 23:33:26.039 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api) in 16.402ms
2024-07-29 23:33:26.049 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 23:33:26.052 -03:00 [INF] HTTP GET /api/hotel/11 responded 200 in 33.1626 ms
2024-07-29 23:33:26.055 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/11 - 200 null application/json; charset=utf-8 71.367ms
2024-07-29 23:35:45.504 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:35:45.819 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:35:45.820 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:35:45.823 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:35:45.824 -03:00 [INF] Hosting environment: Development
2024-07-29 23:35:45.825 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:35:47.150 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:35:47.488 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 341.7851ms
2024-07-29 23:35:47.522 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:35:47.522 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:35:47.539 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 17.1376ms
2024-07-29 23:35:47.608 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 85.7922ms
2024-07-29 23:35:47.698 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:35:47.931 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 233.9877ms
2024-07-29 23:35:54.803 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/hotel/8 - application/json 399
2024-07-29 23:35:55.022 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.UpdateHotel (HotelBookingSystem.Api)'
2024-07-29 23:35:55.074 -03:00 [INF] Route matched with {action = "UpdateHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateHotel(Int32, HotelBookingSystem.Application.DTO.HotelDTO.HotelRequest) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:36:20.202 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:36:20.499 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:36:20.500 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:36:20.503 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:36:20.504 -03:00 [INF] Hosting environment: Development
2024-07-29 23:36:20.505 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:36:21.657 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:36:22.030 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 374.0498ms
2024-07-29 23:36:22.064 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:36:22.066 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:36:22.085 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 21.7447ms
2024-07-29 23:36:22.141 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 75.5335ms
2024-07-29 23:36:22.222 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:36:22.446 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 224.0637ms
2024-07-29 23:36:25.832 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/8 - application/json 251
2024-07-29 23:36:25.899 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 23:36:25.921 -03:00 [INF] Route matched with {action = "GetHotelById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelById(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:36:27.855 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:36:27.897 -03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:36:28.090 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse'.
2024-07-29 23:36:28.114 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api) in 2182.1051ms
2024-07-29 23:36:28.117 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 23:36:28.124 -03:00 [INF] HTTP GET /api/hotel/8 responded 200 in 2282.8831 ms
2024-07-29 23:36:28.144 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/8 - 200 null application/json; charset=utf-8 2312.8455ms
2024-07-29 23:36:34.568 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/8/with-reviews - application/json 251
2024-07-29 23:36:34.577 -03:00 [INF] HTTP GET /api/hotel/8/with-reviews responded 404 in 1.7577 ms
2024-07-29 23:36:34.579 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/8/with-reviews - 404 0 null 10.9222ms
2024-07-29 23:36:34.584 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7288/api/hotel/8/with-reviews, Response status code: 404
2024-07-29 23:38:35.640 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:38:36.086 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:38:36.087 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:38:36.089 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:38:36.089 -03:00 [INF] Hosting environment: Development
2024-07-29 23:38:36.090 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:38:37.830 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:38:38.326 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 505.2081ms
2024-07-29 23:38:38.397 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:38:38.411 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:38:38.415 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 18.8825ms
2024-07-29 23:38:38.518 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 107.112ms
2024-07-29 23:38:38.726 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:38:39.046 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 320.283ms
2024-07-29 23:38:39.994 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/8/with-reviews - application/json 251
2024-07-29 23:38:40.141 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelByIdWithReviews (HotelBookingSystem.Api)'
2024-07-29 23:38:40.216 -03:00 [INF] Route matched with {action = "GetHotelByIdWithReviews", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelByIdWithReviews(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:38:43.100 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId"
2024-07-29 23:38:43.171 -03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId"
2024-07-29 23:38:43.451 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponseWithReviews'.
2024-07-29 23:38:43.497 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetHotelByIdWithReviews (HotelBookingSystem.Api) in 3269.0283ms
2024-07-29 23:38:43.499 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelByIdWithReviews (HotelBookingSystem.Api)'
2024-07-29 23:38:43.504 -03:00 [INF] HTTP GET /api/hotel/8/with-reviews responded 200 in 3494.6068 ms
2024-07-29 23:38:43.521 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/8/with-reviews - 200 null application/json; charset=utf-8 3527.924ms
2024-07-29 23:38:56.191 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/recent-hotels - null null
2024-07-29 23:38:56.342 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 00:53:23', Current time (UTC): '30/7/2024 02:38:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:38:56.408 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 00:53:23', Current time (UTC): '30/7/2024 02:38:56'.
2024-07-29 23:38:56.422 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Customer)
2024-07-29 23:38:56.436 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:38:56.437 -03:00 [INF] HTTP GET /api/hotel/recent-hotels responded 401 in 240.9054 ms
2024-07-29 23:38:56.439 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/recent-hotels - 401 0 null 248.3301ms
2024-07-29 23:39:07.133 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/auth/login - application/json 72
2024-07-29 23:39:07.137 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 23:39:07.145 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelBookingSystem.Application.DTO.UserDTO.UserLoginRequest) on controller HotelBookingSystem.Api.Controllers.AuthController (HotelBookingSystem.Api).
2024-07-29 23:39:07.240 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 23:39:07.246 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2024-07-29 23:39:07.319 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-29 23:39:07.326 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api) in 178.7911ms
2024-07-29 23:39:07.329 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.AuthController.Login (HotelBookingSystem.Api)'
2024-07-29 23:39:07.330 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 194.9442 ms
2024-07-29 23:39:07.332 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/auth/login - 200 null application/json; charset=utf-8 199.009ms
2024-07-29 23:39:23.339 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/recent-hotels - null null
2024-07-29 23:39:23.379 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetRecentHotels (HotelBookingSystem.Api)'
2024-07-29 23:39:23.394 -03:00 [INF] Route matched with {action = "GetRecentHotels", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentHotels(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:39:23.583 -03:00 [WRN] The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2024-07-29 23:39:23.600 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:39:23.636 -03:00 [INF] Executing command: SELECT DISTINCT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "h"."HotelId" = "b"."HotelId" AND "b"."UserId" = @__userId_0 AND "b"."CheckOutDate" < @__currentDate_1)
LIMIT @__p_2
2024-07-29 23:39:23.640 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__currentDate_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "h"."HotelId" = "b"."HotelId" AND "b"."UserId" = @__userId_0 AND "b"."CheckOutDate" < @__currentDate_1)
LIMIT @__p_2
2024-07-29 23:39:23.670 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:39:23.683 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetRecentHotels (HotelBookingSystem.Api) in 281.6959ms
2024-07-29 23:39:23.689 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetRecentHotels (HotelBookingSystem.Api)'
2024-07-29 23:39:23.692 -03:00 [INF] HTTP GET /api/hotel/recent-hotels responded 200 in 350.2576 ms
2024-07-29 23:39:23.696 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/recent-hotels - 200 null application/json; charset=utf-8 357.7557ms
2024-07-29 23:39:33.344 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/featured-deals - application/json 251
2024-07-29 23:39:33.351 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:27:49', Current time (UTC): '30/7/2024 02:39:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:39:33.361 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 02:27:49', Current time (UTC): '30/7/2024 02:39:33'.
2024-07-29 23:39:33.363 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetFeaturedDeals (HotelBookingSystem.Api)'
2024-07-29 23:39:33.374 -03:00 [INF] Route matched with {action = "GetFeaturedDeals", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFeaturedDeals(System.Nullable`1[System.Int32]) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:39:33.453 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "r2"."RoomId", "r2"."AdultCapacity", "r2"."ChildCapacity", "r2"."CreatedAt", "r2"."DiscountedPrice", "r2"."FeaturedDeal", "r2"."HotelId", "r2"."ImagesUrl", "r2"."PricePerNight", "r2"."RoomType", "r2"."UpdatedAt", "t"."c"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", (
        SELECT MIN(COALESCE("r1"."DiscountedPrice", 1.7976931348623157E+308))
        FROM "Rooms" AS "r1"
        WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."FeaturedDeal") AS "c", (
        SELECT MIN(COALESCE("r0"."DiscountedPrice", 1.7976931348623157E+308))
        FROM "Rooms" AS "r0"
        WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."FeaturedDeal") AS "c0"
    FROM "Hotels" AS "h"
    WHERE EXISTS (
        SELECT 1
        FROM "Rooms" AS "r"
        WHERE "h"."HotelId" = "r"."HotelId" AND "r"."FeaturedDeal")
    ORDER BY (
        SELECT MIN(COALESCE("r0"."DiscountedPrice", 1.7976931348623157E+308))
        FROM "Rooms" AS "r0"
        WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."FeaturedDeal")
    LIMIT @__p_0
) AS "t"
LEFT JOIN "Rooms" AS "r2" ON "t"."HotelId" = "r2"."HotelId"
ORDER BY "t"."c0", "t"."HotelId"
2024-07-29 23:39:33.460 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "r2"."RoomId", "r2"."AdultCapacity", "r2"."ChildCapacity", "r2"."CreatedAt", "r2"."DiscountedPrice", "r2"."FeaturedDeal", "r2"."HotelId", "r2"."ImagesUrl", "r2"."PricePerNight", "r2"."RoomType", "r2"."UpdatedAt", "t"."c"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", (
        SELECT MIN(COALESCE("r1"."DiscountedPrice", 1.7976931348623157E+308))
        FROM "Rooms" AS "r1"
        WHERE "h"."HotelId" = "r1"."HotelId" AND "r1"."FeaturedDeal") AS "c", (
        SELECT MIN(COALESCE("r0"."DiscountedPrice", 1.7976931348623157E+308))
        FROM "Rooms" AS "r0"
        WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."FeaturedDeal") AS "c0"
    FROM "Hotels" AS "h"
    WHERE EXISTS (
        SELECT 1
        FROM "Rooms" AS "r"
        WHERE "h"."HotelId" = "r"."HotelId" AND "r"."FeaturedDeal")
    ORDER BY (
        SELECT MIN(COALESCE("r0"."DiscountedPrice", 1.7976931348623157E+308))
        FROM "Rooms" AS "r0"
        WHERE "h"."HotelId" = "r0"."HotelId" AND "r0"."FeaturedDeal")
    LIMIT @__p_0
) AS "t"
LEFT JOIN "Rooms" AS "r2" ON "t"."HotelId" = "r2"."HotelId"
ORDER BY "t"."c0", "t"."HotelId"
2024-07-29 23:39:33.525 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:39:33.527 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetFeaturedDeals (HotelBookingSystem.Api) in 150.4191ms
2024-07-29 23:39:33.528 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetFeaturedDeals (HotelBookingSystem.Api)'
2024-07-29 23:39:33.530 -03:00 [INF] HTTP GET /api/hotel/featured-deals responded 200 in 180.0685 ms
2024-07-29 23:39:33.532 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/featured-deals - 200 null application/json; charset=utf-8 187.7954ms
2024-07-29 23:39:58.791 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/hotel/11 - application/json 251
2024-07-29 23:39:58.795 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.DeleteHotel (HotelBookingSystem.Api)'
2024-07-29 23:39:58.805 -03:00 [INF] Route matched with {action = "DeleteHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteHotel(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:39:58.846 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:39:58.848 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:39:58.996 -03:00 [INF] Executing command: DELETE FROM "Hotels"
WHERE "HotelId" = @p0
RETURNING 1;

2024-07-29 23:39:59.001 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Hotels"
WHERE "HotelId" = @p0
RETURNING 1;
2024-07-29 23:39:59.027 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-07-29 23:39:59.028 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.DeleteHotel (HotelBookingSystem.Api) in 218.7558ms
2024-07-29 23:39:59.031 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.DeleteHotel (HotelBookingSystem.Api)'
2024-07-29 23:39:59.037 -03:00 [INF] HTTP DELETE /api/hotel/11 responded 204 in 243.2212 ms
2024-07-29 23:39:59.040 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/hotel/11 - 204 null null 249.7151ms
2024-07-29 23:40:11.632 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/search?Query=Kansas - null null
2024-07-29 23:40:11.637 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:40:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:40:11.644 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:40:11'.
2024-07-29 23:40:11.645 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 23:40:11.655 -03:00 [INF] Route matched with {action = "Search", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HotelBookingSystem.Application.DTO.HotelDTO.HotelSearchParameters) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:40:11.786 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Hotels" AS "h"
INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
WHERE instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0
2024-07-29 23:40:11.788 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__searchParameters_Query_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Hotels" AS "h"
INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
WHERE instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0
2024-07-29 23:40:11.796 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:40:11.798 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:40:11.802 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
WHERE instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0
LIMIT @__p_2 OFFSET @__p_1
2024-07-29 23:40:11.805 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__searchParameters_Query_0='?' (Size = 6), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
INNER JOIN "Cities" AS "c" ON "h"."CityId" = "c"."CityId"
WHERE instr("h"."Name", @__searchParameters_Query_0) > 0 OR instr("c"."Name", @__searchParameters_Query_0) > 0
LIMIT @__p_2 OFFSET @__p_1
2024-07-29 23:40:11.832 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:40:11.843 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api) in 184.3658ms
2024-07-29 23:40:11.845 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 23:40:11.849 -03:00 [INF] HTTP GET /api/hotel/search responded 200 in 212.5449 ms
2024-07-29 23:40:11.850 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/search?Query=Kansas - 200 null application/json; charset=utf-8 218.1049ms
2024-07-29 23:40:21.909 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/search?HotelType=Luxury - null null
2024-07-29 23:40:21.913 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:40:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:40:21.922 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:40:21'.
2024-07-29 23:40:21.924 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 23:40:21.925 -03:00 [INF] Route matched with {action = "Search", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HotelBookingSystem.Application.DTO.HotelDTO.HotelSearchParameters) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:40:21.950 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Hotels" AS "h"
WHERE "h"."HotelType" = @__hotelTypeEnum_0
2024-07-29 23:40:21.951 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hotelTypeEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Hotels" AS "h"
WHERE "h"."HotelType" = @__hotelTypeEnum_0
2024-07-29 23:40:21.955 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:40:21.956 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:40:21.961 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelType" = @__hotelTypeEnum_0
LIMIT @__p_2 OFFSET @__p_1
2024-07-29 23:40:21.965 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__hotelTypeEnum_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelType" = @__hotelTypeEnum_0
LIMIT @__p_2 OFFSET @__p_1
2024-07-29 23:40:21.970 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:40:21.971 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api) in 40.9794ms
2024-07-29 23:40:21.973 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 23:40:21.977 -03:00 [INF] HTTP GET /api/hotel/search responded 200 in 65.1276 ms
2024-07-29 23:40:21.979 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/search?HotelType=Luxury - 200 null application/json; charset=utf-8 69.7561ms
2024-07-29 23:40:35.258 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/search?Amenities=Spa,%20Gym - null null
2024-07-29 23:40:35.263 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:40:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:40:35.275 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:40:35'.
2024-07-29 23:40:35.277 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 23:40:35.279 -03:00 [INF] Route matched with {action = "Search", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HotelBookingSystem.Application.DTO.HotelDTO.HotelSearchParameters) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:40:35.338 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Hotels" AS "h"
WHERE NOT EXISTS (
    SELECT 1
    FROM json_each(@__amenitiesEnums_0) AS "a"
    WHERE "a"."value" NOT IN (
        SELECT "a0"."value"
        FROM json_each("h"."Amenities") AS "a0"
    ))
2024-07-29 23:40:35.342 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__amenitiesEnums_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Hotels" AS "h"
WHERE NOT EXISTS (
    SELECT 1
    FROM json_each(@__amenitiesEnums_0) AS "a"
    WHERE "a"."value" NOT IN (
        SELECT "a0"."value"
        FROM json_each("h"."Amenities") AS "a0"
    ))
2024-07-29 23:40:35.348 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:40:35.349 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:40:35.355 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE NOT EXISTS (
    SELECT 1
    FROM json_each(@__amenitiesEnums_0) AS "a"
    WHERE "a"."value" NOT IN (
        SELECT "a0"."value"
        FROM json_each("h"."Amenities") AS "a0"
    ))
LIMIT @__p_2 OFFSET @__p_1
2024-07-29 23:40:35.362 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__amenitiesEnums_0='?' (Size = 5), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE NOT EXISTS (
    SELECT 1
    FROM json_each(@__amenitiesEnums_0) AS "a"
    WHERE "a"."value" NOT IN (
        SELECT "a0"."value"
        FROM json_each("h"."Amenities") AS "a0"
    ))
LIMIT @__p_2 OFFSET @__p_1
2024-07-29 23:40:35.366 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:40:35.367 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api) in 83.3339ms
2024-07-29 23:40:35.370 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 23:40:35.371 -03:00 [INF] HTTP GET /api/hotel/search responded 200 in 108.9471 ms
2024-07-29 23:40:35.377 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/search?Amenities=Spa,%20Gym - 200 null application/json; charset=utf-8 119.1964ms
2024-07-29 23:40:43.711 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/search - null null
2024-07-29 23:40:43.716 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:40:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:40:43.724 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:40:43'.
2024-07-29 23:40:43.725 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 23:40:43.726 -03:00 [INF] Route matched with {action = "Search", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(HotelBookingSystem.Application.DTO.HotelDTO.HotelSearchParameters) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:40:43.732 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Hotels" AS "h"
2024-07-29 23:40:43.733 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Hotels" AS "h"
2024-07-29 23:40:43.741 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:40:43.742 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:40:43.748 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
LIMIT @__p_1 OFFSET @__p_0
2024-07-29 23:40:43.749 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
LIMIT @__p_1 OFFSET @__p_0
2024-07-29 23:40:43.758 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:40:43.760 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api) in 32.4055ms
2024-07-29 23:40:43.762 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.Search (HotelBookingSystem.Api)'
2024-07-29 23:40:43.764 -03:00 [INF] HTTP GET /api/hotel/search responded 200 in 49.0148 ms
2024-07-29 23:40:43.766 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/search - 200 null application/json; charset=utf-8 54.8843ms
2024-07-29 23:41:06.424 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/hotel/8/reviews - application/json 48
2024-07-29 23:41:06.430 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.AddGuestReview (HotelBookingSystem.Api)'
2024-07-29 23:41:06.435 -03:00 [INF] Route matched with {action = "AddGuestReview", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGuestReview(Int32, HotelBookingSystem.Application.DTO.GuestReviewDTO.GuestReviewRequest) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:41:06.480 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:41:06.483 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:41:06.491 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 23:41:06.492 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 23:41:06.575 -03:00 [INF] Executing command: INSERT INTO "GuestReviews" ("Comment", "CreatedDate", "HotelId", "Rating", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "GuestReviewId";

2024-07-29 23:41:06.580 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 9), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "GuestReviews" ("Comment", "CreatedDate", "HotelId", "Rating", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "GuestReviewId";
2024-07-29 23:41:06.640 -03:00 [INF] Executing command: SELECT "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM "GuestReviews" AS "g"
WHERE "g"."HotelId" = @__hotelId_0
2024-07-29 23:41:06.641 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM "GuestReviews" AS "g"
WHERE "g"."HotelId" = @__hotelId_0
2024-07-29 23:41:06.655 -03:00 [INF] Executing command: UPDATE "Hotels" SET "Address" = @p0, "Amenities" = @p1, "CityId" = @p2, "CreatedAt" = @p3, "Description" = @p4, "HotelType" = @p5, "Name" = @p6, "Owner" = @p7, "StarRating" = @p8, "ThumbnailUrl" = @p9, "UpdatedAt" = @p10
WHERE "HotelId" = @p11
RETURNING 1;

2024-07-29 23:41:06.661 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 15), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 66), @p5='?' (DbType = Int32), @p6='?' (Size = 15), @p7='?' (Size = 14), @p8='?' (DbType = Int32), @p9='?' (Size = 45), @p10='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Hotels" SET "Address" = @p0, "Amenities" = @p1, "CityId" = @p2, "CreatedAt" = @p3, "Description" = @p4, "HotelType" = @p5, "Name" = @p6, "Owner" = @p7, "StarRating" = @p8, "ThumbnailUrl" = @p9, "UpdatedAt" = @p10
WHERE "HotelId" = @p11
RETURNING 1;
2024-07-29 23:41:06.674 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.GuestReviewDTO.GuestReviewResponse'.
2024-07-29 23:41:06.677 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.AddGuestReview (HotelBookingSystem.Api) in 233.3917ms
2024-07-29 23:41:06.680 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.AddGuestReview (HotelBookingSystem.Api)'
2024-07-29 23:41:06.683 -03:00 [INF] HTTP POST /api/hotel/8/reviews responded 200 in 253.5021 ms
2024-07-29 23:41:06.687 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/hotel/8/reviews - 200 null application/json; charset=utf-8 264.1624ms
2024-07-29 23:41:17.144 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/8 - application/json 251
2024-07-29 23:41:17.148 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 23:41:17.159 -03:00 [INF] Route matched with {action = "GetHotelById", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelById(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:41:17.173 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:41:17.177 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:41:17.181 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponse'.
2024-07-29 23:41:17.182 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api) in 17.4278ms
2024-07-29 23:41:17.188 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelById (HotelBookingSystem.Api)'
2024-07-29 23:41:17.190 -03:00 [INF] HTTP GET /api/hotel/8 responded 200 in 42.1697 ms
2024-07-29 23:41:17.192 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/8 - 200 null application/json; charset=utf-8 47.2286ms
2024-07-29 23:41:22.506 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/hotel/8/with-reviews - application/json 251
2024-07-29 23:41:22.509 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelByIdWithReviews (HotelBookingSystem.Api)'
2024-07-29 23:41:22.512 -03:00 [INF] Route matched with {action = "GetHotelByIdWithReviews", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotelByIdWithReviews(Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:41:22.518 -03:00 [INF] Executing command: SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId"
2024-07-29 23:41:22.522 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."HotelId", "t"."Address", "t"."Amenities", "t"."CityId", "t"."CreatedAt", "t"."Description", "t"."HotelType", "t"."Name", "t"."Owner", "t"."StarRating", "t"."ThumbnailUrl", "t"."UpdatedAt", "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM (
    SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
    FROM "Hotels" AS "h"
    WHERE "h"."HotelId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "GuestReviews" AS "g" ON "t"."HotelId" = "g"."HotelId"
ORDER BY "t"."HotelId"
2024-07-29 23:41:22.529 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.HotelDTO.HotelResponseWithReviews'.
2024-07-29 23:41:22.539 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.GetHotelByIdWithReviews (HotelBookingSystem.Api) in 22.8581ms
2024-07-29 23:41:22.542 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.GetHotelByIdWithReviews (HotelBookingSystem.Api)'
2024-07-29 23:41:22.549 -03:00 [INF] HTTP GET /api/hotel/8/with-reviews responded 200 in 39.9805 ms
2024-07-29 23:41:22.553 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/hotel/8/with-reviews - 200 null application/json; charset=utf-8 47.2967ms
2024-07-29 23:41:39.482 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/hotel/1/reviews/4 - application/json 72
2024-07-29 23:41:39.487 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.DeleteGuestReview (HotelBookingSystem.Api)'
2024-07-29 23:41:39.494 -03:00 [INF] Route matched with {action = "DeleteGuestReview", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGuestReview(Int32, Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:41:39.504 -03:00 [INF] Executing command: SELECT "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM "GuestReviews" AS "g"
WHERE "g"."GuestReviewId" = @__p_0
LIMIT 1
2024-07-29 23:41:39.506 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM "GuestReviews" AS "g"
WHERE "g"."GuestReviewId" = @__p_0
LIMIT 1
2024-07-29 23:41:39.763 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.DeleteGuestReview (HotelBookingSystem.Api) in 266.7394ms
2024-07-29 23:41:39.770 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.DeleteGuestReview (HotelBookingSystem.Api)'
2024-07-29 23:41:39.812 -03:00 [WRN] Invalid argument.
System.ArgumentException: Invalid hotel ID
   at HotelBookingSystem.Application.Services.GuestReviewService.DeleteReviewAsync(Int32 hotelId, Int32 reviewId) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Application\Services\GuestReviewService.cs:line 58
   at HotelBookingSystem.Api.Controllers.HotelController.DeleteGuestReview(Int32 hotelId, Int32 reviewId) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Controllers\HotelController.cs:line 92
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HotelBookingSystem.Api.Middlewares.ErrorHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Middlewares\ErrorHandlingMiddleware.cs:line 20
2024-07-29 23:41:39.858 -03:00 [INF] HTTP DELETE /api/hotel/1/reviews/4 responded 400 in 373.3993 ms
2024-07-29 23:41:39.860 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/hotel/1/reviews/4 - 400 null application/json 377.4867ms
2024-07-29 23:41:44.539 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/hotel/8/reviews/4 - application/json 72
2024-07-29 23:41:44.544 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelController.DeleteGuestReview (HotelBookingSystem.Api)'
2024-07-29 23:41:44.547 -03:00 [INF] Route matched with {action = "DeleteGuestReview", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGuestReview(Int32, Int32) on controller HotelBookingSystem.Api.Controllers.HotelController (HotelBookingSystem.Api).
2024-07-29 23:41:44.553 -03:00 [INF] Executing command: SELECT "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM "GuestReviews" AS "g"
WHERE "g"."GuestReviewId" = @__p_0
LIMIT 1
2024-07-29 23:41:44.555 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM "GuestReviews" AS "g"
WHERE "g"."GuestReviewId" = @__p_0
LIMIT 1
2024-07-29 23:41:44.558 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:41:44.564 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:41:44.569 -03:00 [INF] Executing command: DELETE FROM "GuestReviews"
WHERE "GuestReviewId" = @p0
RETURNING 1;

2024-07-29 23:41:44.571 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "GuestReviews"
WHERE "GuestReviewId" = @p0
RETURNING 1;
2024-07-29 23:41:44.578 -03:00 [INF] Executing command: SELECT "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM "GuestReviews" AS "g"
WHERE "g"."HotelId" = @__hotelId_0
2024-07-29 23:41:44.584 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__hotelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."GuestReviewId", "g"."Comment", "g"."CreatedDate", "g"."HotelId", "g"."Rating", "g"."UserId"
FROM "GuestReviews" AS "g"
WHERE "g"."HotelId" = @__hotelId_0
2024-07-29 23:41:44.588 -03:00 [INF] Executing command: UPDATE "Hotels" SET "Address" = @p0, "Amenities" = @p1, "CityId" = @p2, "CreatedAt" = @p3, "Description" = @p4, "HotelType" = @p5, "Name" = @p6, "Owner" = @p7, "StarRating" = @p8, "ThumbnailUrl" = @p9, "UpdatedAt" = @p10
WHERE "HotelId" = @p11
RETURNING 1;

2024-07-29 23:41:44.590 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 15), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 66), @p5='?' (DbType = Int32), @p6='?' (Size = 15), @p7='?' (Size = 14), @p8='?' (DbType = Int32), @p9='?' (Size = 45), @p10='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Hotels" SET "Address" = @p0, "Amenities" = @p1, "CityId" = @p2, "CreatedAt" = @p3, "Description" = @p4, "HotelType" = @p5, "Name" = @p6, "Owner" = @p7, "StarRating" = @p8, "ThumbnailUrl" = @p9, "UpdatedAt" = @p10
WHERE "HotelId" = @p11
RETURNING 1;
2024-07-29 23:41:44.600 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-07-29 23:41:44.601 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelController.DeleteGuestReview (HotelBookingSystem.Api) in 48.618ms
2024-07-29 23:41:44.603 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelController.DeleteGuestReview (HotelBookingSystem.Api)'
2024-07-29 23:41:44.605 -03:00 [INF] HTTP DELETE /api/hotel/8/reviews/4 responded 204 in 62.3537 ms
2024-07-29 23:41:44.610 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/hotel/8/reviews/4 - 204 null null 71.2756ms
2024-07-29 23:42:16.620 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/room/8 - application/json 321
2024-07-29 23:42:16.635 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:42:16.651 -03:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(Int32, HotelBookingSystem.Application.DTO.RoomDTO.RoomRequest) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:42:16.725 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:42:16.727 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:42:16.750 -03:00 [INF] Executing command: INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";

2024-07-29 23:42:16.756 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Double), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 95), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";
2024-07-29 23:42:16.779 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse'.
2024-07-29 23:42:16.818 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api) in 157.9376ms
2024-07-29 23:42:16.820 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:42:16.848 -03:00 [WRN] Invalid operation.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HotelBookingSystem.Api.Middlewares.ErrorHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Middlewares\ErrorHandlingMiddleware.cs:line 20
2024-07-29 23:42:16.878 -03:00 [INF] HTTP POST /api/room/8 responded 400 in 243.6554 ms
2024-07-29 23:42:16.879 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/room/8 - 400 null application/json 259.7087ms
2024-07-29 23:43:13.762 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/room/8 - application/json 321
2024-07-29 23:43:13.768 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:43:13.770 -03:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(Int32, HotelBookingSystem.Application.DTO.RoomDTO.RoomRequest) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:43:13.777 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:43:13.779 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:43:13.784 -03:00 [INF] Executing command: INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";

2024-07-29 23:43:13.789 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Double), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 95), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";
2024-07-29 23:43:13.796 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse'.
2024-07-29 23:43:13.803 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api) in 30.8947ms
2024-07-29 23:43:13.805 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:43:13.829 -03:00 [WRN] Invalid operation.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HotelBookingSystem.Api.Middlewares.ErrorHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Middlewares\ErrorHandlingMiddleware.cs:line 20
2024-07-29 23:43:13.853 -03:00 [INF] HTTP POST /api/room/8 responded 400 in 85.1889 ms
2024-07-29 23:43:13.854 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/room/8 - 400 null application/json 92.2067ms
2024-07-29 23:46:44.318 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/room/8 - application/json 321
2024-07-29 23:46:44.322 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:46:44.323 -03:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(Int32, HotelBookingSystem.Application.DTO.RoomDTO.RoomRequest) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:46:44.334 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:46:44.337 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:46:44.341 -03:00 [INF] Executing command: INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";

2024-07-29 23:46:44.343 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Double), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 95), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";
2024-07-29 23:46:44.351 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse'.
2024-07-29 23:46:44.354 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api) in 23.1998ms
2024-07-29 23:46:44.356 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:46:44.381 -03:00 [WRN] Invalid operation.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HotelBookingSystem.Api.Middlewares.ErrorHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Middlewares\ErrorHandlingMiddleware.cs:line 20
2024-07-29 23:46:44.397 -03:00 [INF] HTTP POST /api/room/8 responded 400 in 75.7784 ms
2024-07-29 23:46:44.398 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/room/8 - 400 null application/json 79.6695ms
2024-07-29 23:47:19.222 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/room/8 - application/json 321
2024-07-29 23:47:19.226 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:47:19.228 -03:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(Int32, HotelBookingSystem.Application.DTO.RoomDTO.RoomRequest) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:47:36.785 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:47:36.788 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:48:09.328 -03:00 [INF] Executing command: INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";

2024-07-29 23:48:09.331 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Double), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 95), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";
2024-07-29 23:49:11.530 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:49:11.936 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:49:11.937 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:49:11.939 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:49:11.940 -03:00 [INF] Hosting environment: Development
2024-07-29 23:49:11.940 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:49:13.551 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:49:13.912 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 375.6496ms
2024-07-29 23:49:13.937 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:49:13.958 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:49:13.967 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 29.8426ms
2024-07-29 23:49:14.059 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 103.5994ms
2024-07-29 23:49:14.169 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:49:14.496 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 327.4381ms
2024-07-29 23:49:16.326 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/room/8 - application/json 321
2024-07-29 23:49:16.613 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:49:16.663 -03:00 [INF] Route matched with {action = "CreateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRoom(Int32, HotelBookingSystem.Application.DTO.RoomDTO.RoomRequest) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:49:19.694 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:49:19.758 -03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:49:20.312 -03:00 [INF] Executing command: INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";

2024-07-29 23:49:20.320 -03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Double), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 95), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Rooms" ("AdultCapacity", "ChildCapacity", "CreatedAt", "DiscountedPrice", "FeaturedDeal", "HotelId", "ImagesUrl", "PricePerNight", "RoomType", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "RoomId";
2024-07-29 23:49:20.396 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse'.
2024-07-29 23:49:20.510 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api) in 3836.3054ms
2024-07-29 23:49:20.513 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.CreateRoom (HotelBookingSystem.Api)'
2024-07-29 23:49:20.519 -03:00 [INF] HTTP POST /api/room/8 responded 201 in 4179.3715 ms
2024-07-29 23:49:20.537 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/room/8 - 201 null application/json; charset=utf-8 4210.9437ms
2024-07-29 23:49:40.020 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/room/8/30 - application/json 321
2024-07-29 23:49:40.068 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 22:26:52', Current time (UTC): '30/7/2024 02:49:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:49:40.144 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 22:26:52', Current time (UTC): '30/7/2024 02:49:40'.
2024-07-29 23:49:40.149 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-07-29 23:49:40.159 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:49:40.160 -03:00 [INF] HTTP PUT /api/room/8/30 responded 401 in 131.5824 ms
2024-07-29 23:49:40.163 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/room/8/30 - 401 0 null 142.7566ms
2024-07-29 23:49:48.642 -03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/room/8/30 - application/json 321
2024-07-29 23:49:48.651 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.UpdateRoom (HotelBookingSystem.Api)'
2024-07-29 23:49:48.657 -03:00 [INF] Route matched with {action = "UpdateRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateRoom(Int32, Int32, HotelBookingSystem.Application.DTO.RoomDTO.RoomRequest) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:49:48.864 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:49:48.871 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:49:48.897 -03:00 [INF] Executing command: UPDATE "Rooms" SET "AdultCapacity" = @p0, "ChildCapacity" = @p1, "CreatedAt" = @p2, "DiscountedPrice" = @p3, "FeaturedDeal" = @p4, "HotelId" = @p5, "ImagesUrl" = @p6, "PricePerNight" = @p7, "RoomType" = @p8, "UpdatedAt" = @p9
WHERE "RoomId" = @p10
RETURNING 1;

2024-07-29 23:49:48.905 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Double), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 95), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Rooms" SET "AdultCapacity" = @p0, "ChildCapacity" = @p1, "CreatedAt" = @p2, "DiscountedPrice" = @p3, "FeaturedDeal" = @p4, "HotelId" = @p5, "ImagesUrl" = @p6, "PricePerNight" = @p7, "RoomType" = @p8, "UpdatedAt" = @p9
WHERE "RoomId" = @p10
RETURNING 1;
2024-07-29 23:49:48.918 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse'.
2024-07-29 23:49:48.920 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.UpdateRoom (HotelBookingSystem.Api) in 260.5857ms
2024-07-29 23:49:48.922 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.UpdateRoom (HotelBookingSystem.Api)'
2024-07-29 23:49:48.923 -03:00 [INF] HTTP PUT /api/room/8/30 responded 200 in 276.1028 ms
2024-07-29 23:49:48.924 -03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/room/8/30 - 200 null application/json; charset=utf-8 281.9248ms
2024-07-29 23:50:00.343 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/8/30 - application/json 281
2024-07-29 23:50:00.348 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 18:52:08', Current time (UTC): '30/7/2024 02:50:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:50:00.357 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 18:52:08', Current time (UTC): '30/7/2024 02:50:00'.
2024-07-29 23:50:00.360 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api)'
2024-07-29 23:50:00.365 -03:00 [INF] Route matched with {action = "GetRoomById", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoomById(Int32, Int32) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:50:00.405 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:50:00.410 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:50:00.414 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse'.
2024-07-29 23:50:00.415 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api) in 44.8819ms
2024-07-29 23:50:00.417 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.GetRoomById (HotelBookingSystem.Api)'
2024-07-29 23:50:00.419 -03:00 [INF] HTTP GET /api/room/8/30 responded 200 in 71.5506 ms
2024-07-29 23:50:00.420 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/8/30 - 200 null application/json; charset=utf-8 76.9598ms
2024-07-29 23:50:09.032 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search - null null
2024-07-29 23:50:09.037 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:50:09'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:50:09.044 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:50:09'.
2024-07-29 23:50:09.044 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:50:09.059 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:50:09.146 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-07-29 23:50:09.166 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 103.4513ms
2024-07-29 23:50:09.171 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:50:09.173 -03:00 [INF] HTTP GET /api/room/search responded 400 in 136.6964 ms
2024-07-29 23:50:09.176 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search - 400 null application/problem+json; charset=utf-8 144.0196ms
2024-07-29 23:51:20.680 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:51:20.907 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:51:20.908 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:51:20.911 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:51:20.911 -03:00 [INF] Hosting environment: Development
2024-07-29 23:51:20.912 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:51:22.299 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:51:22.583 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 288.5608ms
2024-07-29 23:51:22.594 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:51:22.604 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 10.3629ms
2024-07-29 23:51:22.609 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:51:22.682 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.1691ms
2024-07-29 23:51:22.830 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:51:23.066 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 237.4902ms
2024-07-29 23:51:39.381 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search - null null
2024-07-29 23:51:39.582 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:51:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:51:39.618 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:51:39'.
2024-07-29 23:51:39.623 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:51:39.661 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:51:41.303 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-07-29 23:51:41.342 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 1674.1092ms
2024-07-29 23:51:41.345 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:51:41.348 -03:00 [INF] HTTP GET /api/room/search responded 400 in 1958.2882 ms
2024-07-29 23:51:41.358 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search - 400 null application/problem+json; charset=utf-8 1978.0965ms
2024-07-29 23:52:59.328 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:52:59.578 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:52:59.580 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:52:59.583 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:52:59.584 -03:00 [INF] Hosting environment: Development
2024-07-29 23:52:59.585 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:53:00.950 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:53:01.207 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 264.7358ms
2024-07-29 23:53:01.238 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:53:01.238 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:53:01.271 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 32.9043ms
2024-07-29 23:53:01.322 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.0576ms
2024-07-29 23:53:01.386 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:53:01.630 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 243.3108ms
2024-07-29 23:53:03.915 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search - null null
2024-07-29 23:53:04.039 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:53:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:53:04.074 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:53:04'.
2024-07-29 23:53:04.084 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:53:04.132 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:53:05.950 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-07-29 23:53:05.986 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 1828.6824ms
2024-07-29 23:53:05.989 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:53:05.994 -03:00 [INF] HTTP GET /api/room/search responded 400 in 2070.5902 ms
2024-07-29 23:53:06.012 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search - 400 null application/problem+json; charset=utf-8 2096.9184ms
2024-07-29 23:53:44.148 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:53:44.509 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:53:44.511 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:53:44.514 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:53:44.516 -03:00 [INF] Hosting environment: Development
2024-07-29 23:53:44.516 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:53:45.527 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:53:45.978 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 453.7969ms
2024-07-29 23:53:46.000 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:53:46.000 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:53:46.029 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 30.1833ms
2024-07-29 23:53:46.082 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.6303ms
2024-07-29 23:53:46.160 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:53:46.320 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 159.5348ms
2024-07-29 23:53:48.551 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search - null null
2024-07-29 23:53:48.675 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:53:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:53:48.707 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:53:48'.
2024-07-29 23:53:48.712 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:53:48.738 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:53:49.939 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-07-29 23:53:49.962 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 1212.0165ms
2024-07-29 23:53:49.963 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:53:49.966 -03:00 [INF] HTTP GET /api/room/search responded 400 in 1403.6237 ms
2024-07-29 23:53:49.975 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search - 400 null application/problem+json; charset=utf-8 1423.9731ms
2024-07-29 23:54:25.295 -03:00 [INF] User profile is available. Using 'C:\Users\loren\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-29 23:54:25.540 -03:00 [INF] Now listening on: https://localhost:7288
2024-07-29 23:54:25.542 -03:00 [INF] Now listening on: http://localhost:5124
2024-07-29 23:54:25.545 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-29 23:54:25.546 -03:00 [INF] Hosting environment: Development
2024-07-29 23:54:25.546 -03:00 [INF] Content root path: C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api
2024-07-29 23:54:26.106 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2024-07-29 23:54:26.406 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 302.6657ms
2024-07-29 23:54:26.439 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2024-07-29 23:54:26.439 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2024-07-29 23:54:26.464 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 25.1902ms
2024-07-29 23:54:26.515 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.529ms
2024-07-29 23:54:26.596 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2024-07-29 23:54:26.800 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 203.6232ms
2024-07-29 23:54:30.322 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search - null null
2024-07-29 23:54:30.614 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:54:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:54:30.662 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:54:30'.
2024-07-29 23:54:30.671 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:54:30.733 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:54:33.135 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
2024-07-29 23:54:33.178 -03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
2024-07-29 23:54:33.221 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:54:33.224 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:54:33.357 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
    LIMIT @__p_5 OFFSET @__p_4
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:54:33.363 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32), @__p_5='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
    LIMIT @__p_5 OFFSET @__p_4
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:54:33.562 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:54:33.612 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 2870.0854ms
2024-07-29 23:54:33.618 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:54:33.621 -03:00 [INF] HTTP GET /api/room/search responded 200 in 3291.7186 ms
2024-07-29 23:54:33.631 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search - 200 null application/json; charset=utf-8 3309.0984ms
2024-07-29 23:54:47.752 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search?Children=2 - null null
2024-07-29 23:54:47.761 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:54:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:54:47.772 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:54:47'.
2024-07-29 23:54:47.774 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:54:47.776 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:54:47.890 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
2024-07-29 23:54:47.893 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
2024-07-29 23:54:47.897 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
    LIMIT @__p_5 OFFSET @__p_4
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:54:47.902 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32), @__p_5='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
    LIMIT @__p_5 OFFSET @__p_4
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:54:47.919 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:54:47.928 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 146.8804ms
2024-07-29 23:54:47.930 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:54:47.933 -03:00 [INF] HTTP GET /api/room/search responded 200 in 174.2312 ms
2024-07-29 23:54:47.941 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search?Children=2 - 200 null application/json; charset=utf-8 188.1878ms
2024-07-29 23:54:55.951 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search - null null
2024-07-29 23:54:55.961 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:54:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:54:55.968 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:54:55'.
2024-07-29 23:54:55.972 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:54:55.975 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:54:55.995 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
2024-07-29 23:54:56.003 -03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
2024-07-29 23:54:56.009 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
    LIMIT @__p_5 OFFSET @__p_4
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:54:56.012 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32), @__p_5='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
    LIMIT @__p_5 OFFSET @__p_4
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:54:56.025 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:54:56.027 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 48.9744ms
2024-07-29 23:54:56.029 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:54:56.030 -03:00 [INF] HTTP GET /api/room/search responded 200 in 74.4988 ms
2024-07-29 23:54:56.037 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search - 200 null application/json; charset=utf-8 85.7368ms
2024-07-29 23:55:00.063 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search?Adults=4 - null null
2024-07-29 23:55:00.065 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:55:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:55:00.071 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:55:00'.
2024-07-29 23:55:00.072 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:55:00.076 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:55:00.083 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
2024-07-29 23:55:00.085 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
2024-07-29 23:55:00.094 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
    LIMIT @__p_5 OFFSET @__p_4
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:55:00.098 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32), @__p_5='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3
    LIMIT @__p_5 OFFSET @__p_4
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:55:00.110 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:55:00.113 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 33.0895ms
2024-07-29 23:55:00.115 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:55:00.117 -03:00 [INF] HTTP GET /api/room/search responded 200 in 52.1428 ms
2024-07-29 23:55:00.118 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search?Adults=4 - 200 null application/json; charset=utf-8 55.6848ms
2024-07-29 23:55:07.033 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/room/search?MinPrice=100&MaxPrice=200 - null null
2024-07-29 23:55:07.038 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:55:07'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:55:07.046 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/7/2024 20:34:40', Current time (UTC): '30/7/2024 02:55:07'.
2024-07-29 23:55:07.047 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:55:07.049 -03:00 [INF] Route matched with {action = "SearchRooms", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchRooms(HotelBookingSystem.Application.DTO.RoomDTO.RoomSearchParameters) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:55:07.065 -03:00 [INF] Executing command: SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3 AND "r"."PricePerNight" >= @__searchParameters_MinPrice_4 AND "r"."PricePerNight" <= @__searchParameters_MaxPrice_5
2024-07-29 23:55:07.070 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32), @__searchParameters_MinPrice_4='?' (DbType = Double), @__searchParameters_MaxPrice_5='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Rooms" AS "r"
WHERE NOT EXISTS (
    SELECT 1
    FROM "Bookings" AS "b"
    WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3 AND "r"."PricePerNight" >= @__searchParameters_MinPrice_4 AND "r"."PricePerNight" <= @__searchParameters_MaxPrice_5
2024-07-29 23:55:07.083 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:55:07.084 -03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-07-29 23:55:07.097 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3 AND "r"."PricePerNight" >= @__searchParameters_MinPrice_4 AND "r"."PricePerNight" <= @__searchParameters_MaxPrice_5
    LIMIT @__p_7 OFFSET @__p_6
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:55:07.101 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__searchParameters_CheckInDate_0='?' (DbType = DateTime), @__searchParameters_CheckOutDate_1='?' (DbType = DateTime), @__searchParameters_Adults_2='?' (DbType = Int32), @__searchParameters_Children_3='?' (DbType = Int32), @__searchParameters_MinPrice_4='?' (DbType = Double), @__searchParameters_MaxPrice_5='?' (DbType = Double), @__p_7='?' (DbType = Int32), @__p_6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b0"."BookingId", "b0"."CheckInDate", "b0"."CheckOutDate", "b0"."HotelId", "b0"."RoomId", "b0"."SpecialRequests", "b0"."TotalPrice", "b0"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE NOT EXISTS (
        SELECT 1
        FROM "Bookings" AS "b"
        WHERE "r"."RoomId" = "b"."RoomId" AND "b"."CheckOutDate" > @__searchParameters_CheckInDate_0 AND "b"."CheckInDate" < @__searchParameters_CheckOutDate_1) AND "r"."AdultCapacity" >= @__searchParameters_Adults_2 AND "r"."ChildCapacity" >= @__searchParameters_Children_3 AND "r"."PricePerNight" >= @__searchParameters_MinPrice_4 AND "r"."PricePerNight" <= @__searchParameters_MaxPrice_5
    LIMIT @__p_7 OFFSET @__p_6
) AS "t"
LEFT JOIN "Bookings" AS "b0" ON "t"."RoomId" = "b0"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:55:07.114 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Domain.Utilities.PaginatedList`1[[HotelBookingSystem.Application.DTO.RoomDTO.RoomResponse, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-29 23:55:07.117 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api) in 65.7886ms
2024-07-29 23:55:07.123 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.SearchRooms (HotelBookingSystem.Api)'
2024-07-29 23:55:07.126 -03:00 [INF] HTTP GET /api/room/search responded 200 in 88.8611 ms
2024-07-29 23:55:07.127 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/room/search?MinPrice=100&MaxPrice=200 - 200 null application/json; charset=utf-8 94.4391ms
2024-07-29 23:55:34.397 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/room/8/30 - application/json 281
2024-07-29 23:55:34.413 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.RoomController.DeleteRoom (HotelBookingSystem.Api)'
2024-07-29 23:55:34.420 -03:00 [INF] Route matched with {action = "DeleteRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRoom(Int32, Int32) on controller HotelBookingSystem.Api.Controllers.RoomController (HotelBookingSystem.Api).
2024-07-29 23:55:34.447 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:55:34.453 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:55:34.593 -03:00 [INF] Executing command: DELETE FROM "Rooms"
WHERE "RoomId" = @p0
RETURNING 1;

2024-07-29 23:55:34.594 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Rooms"
WHERE "RoomId" = @p0
RETURNING 1;
2024-07-29 23:55:34.618 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-07-29 23:55:34.620 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.RoomController.DeleteRoom (HotelBookingSystem.Api) in 194.8238ms
2024-07-29 23:55:34.622 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.RoomController.DeleteRoom (HotelBookingSystem.Api)'
2024-07-29 23:55:34.624 -03:00 [INF] HTTP DELETE /api/room/8/30 responded 204 in 225.0542 ms
2024-07-29 23:55:34.625 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/room/8/30 - 204 null null 228.6073ms
2024-07-29 23:55:50.728 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/booking - application/json 163
2024-07-29 23:55:50.740 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 23:55:50.746 -03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingSystem.Application.DTO.BookingDTO.BookingRequest) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:55:50.854 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:55:50.856 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:55:50.974 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:55:50.976 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:55:51.034 -03:00 [INF] Executing command: SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 23:55:51.035 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__p_0
LIMIT 1
2024-07-29 23:55:51.124 -03:00 [INF] Executing command: INSERT INTO "Bookings" ("CheckInDate", "CheckOutDate", "HotelId", "RoomId", "SpecialRequests", "TotalPrice", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "BookingId";

2024-07-29 23:55:51.127 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 23), @p5='?' (DbType = Double), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("CheckInDate", "CheckOutDate", "HotelId", "RoomId", "SpecialRequests", "TotalPrice", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "BookingId";
2024-07-29 23:55:51.166 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 23:55:51.170 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 23:55:51.206 -03:00 [INF] Executing command: UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;

2024-07-29 23:55:51.210 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 8), @p3='?' (Size = 5), @p4='?', @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;
2024-07-29 23:55:51.278 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 23:55:51.324 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api) in 573.2694ms
2024-07-29 23:55:51.328 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 23:55:51.330 -03:00 [INF] HTTP POST /api/booking responded 201 in 596.3329 ms
2024-07-29 23:55:51.332 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/booking - 201 null application/json; charset=utf-8 604.0917ms
2024-07-29 23:55:55.449 -03:00 [ERR] Failed to send email to john.doe@example.com
System.Net.Mail.SmtpException: Failure sending mail.
 ---> System.Net.Sockets.SocketException (10061): No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.TaskToAsyncResult.End(IAsyncResult asyncResult)
   at System.Net.Sockets.TcpClient.EndConnect(IAsyncResult asyncResult)
   at System.Net.Mail.SmtpConnection.ConnectAndHandshakeAsyncResult.InitializeConnectionCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at System.Net.Mail.SmtpClient.ConnectCallback(IAsyncResult result)
   --- End of inner exception stack trace ---
   at HotelBookingSystem.Infrastructure.EmailSender.EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Infrastructure\EmailSender\EmailService.cs:line 32
2024-07-29 23:56:02.572 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/booking - application/json 163
2024-07-29 23:56:02.578 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 23:56:02.579 -03:00 [INF] Route matched with {action = "CreateBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBooking(HotelBookingSystem.Application.DTO.BookingDTO.BookingRequest) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:56:02.587 -03:00 [INF] Executing command: SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:56:02.589 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RoomId", "t"."AdultCapacity", "t"."ChildCapacity", "t"."CreatedAt", "t"."DiscountedPrice", "t"."FeaturedDeal", "t"."HotelId", "t"."ImagesUrl", "t"."PricePerNight", "t"."RoomType", "t"."UpdatedAt", "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId"
FROM (
    SELECT "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
    FROM "Rooms" AS "r"
    WHERE "r"."RoomId" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "Bookings" AS "b" ON "t"."RoomId" = "b"."RoomId"
ORDER BY "t"."RoomId"
2024-07-29 23:56:02.594 -03:00 [INF] Executing command: SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:56:02.596 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt"
FROM "Hotels" AS "h"
WHERE "h"."HotelId" = @__p_0
LIMIT 1
2024-07-29 23:56:02.756 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api) in 174.1477ms
2024-07-29 23:56:02.760 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CreateBooking (HotelBookingSystem.Api)'
2024-07-29 23:56:02.785 -03:00 [WRN] Invalid operation.
System.InvalidOperationException: Room is already booked for the specified dates
   at HotelBookingSystem.Application.Services.BookingService.CalculateRoomAvailability(Room room, BookingRequest bookingRequest) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Application\Services\BookingService.cs:line 90
   at HotelBookingSystem.Application.Services.BookingService.CreateBookingAsync(BookingRequest bookingRequest) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Application\Services\BookingService.cs:line 62
   at HotelBookingSystem.Api.Controllers.BookingController.CreateBooking(BookingRequest bookingRequest) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Controllers\BookingController.cs:line 25
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HotelBookingSystem.Api.Middlewares.ErrorHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Middlewares\ErrorHandlingMiddleware.cs:line 20
2024-07-29 23:56:02.810 -03:00 [INF] HTTP POST /api/booking responded 400 in 236.2912 ms
2024-07-29 23:56:02.812 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/booking - 400 null application/json 239.8767ms
2024-07-29 23:56:25.878 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/20 - null null
2024-07-29 23:56:25.884 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 00:48:20', Current time (UTC): '30/7/2024 02:56:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:56:25.897 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 00:48:20', Current time (UTC): '30/7/2024 02:56:25'.
2024-07-29 23:56:25.900 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 23:56:25.909 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:56:25.911 -03:00 [INF] HTTP GET /api/booking/20 responded 401 in 28.9845 ms
2024-07-29 23:56:25.913 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/20 - 401 0 null 34.9189ms
2024-07-29 23:56:32.111 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/20 - null null
2024-07-29 23:56:32.124 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:56:32.128 -03:00 [INF] Route matched with {action = "GetBookingDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingDetails(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:56:32.171 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:56:32.175 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:56:32.253 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api) in 122.2569ms
2024-07-29 23:56:32.255 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:56:32.276 -03:00 [WRN] Resource not found.
System.Collections.Generic.KeyNotFoundException: Booking not found
   at HotelBookingSystem.Application.Services.BookingService.GetBookingDetailsAsync(Int32 bookingId) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Application\Services\BookingService.cs:line 145
   at HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails(Int32 bookingId) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Controllers\BookingController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HotelBookingSystem.Api.Middlewares.ErrorHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Middlewares\ErrorHandlingMiddleware.cs:line 20
2024-07-29 23:56:32.297 -03:00 [INF] HTTP GET /api/booking/20 responded 404 in 173.7780 ms
2024-07-29 23:56:32.299 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/20 - 404 null application/json 187.1487ms
2024-07-29 23:56:42.954 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/19 - null null
2024-07-29 23:56:42.959 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:56:42.962 -03:00 [INF] Route matched with {action = "GetBookingDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingDetails(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:56:42.966 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:56:42.974 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:56:43.042 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api) in 76.9376ms
2024-07-29 23:56:43.048 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:56:43.073 -03:00 [WRN] Resource not found.
System.Collections.Generic.KeyNotFoundException: Booking not found
   at HotelBookingSystem.Application.Services.BookingService.GetBookingDetailsAsync(Int32 bookingId) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Application\Services\BookingService.cs:line 145
   at HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails(Int32 bookingId) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Controllers\BookingController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HotelBookingSystem.Api.Middlewares.ErrorHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Middlewares\ErrorHandlingMiddleware.cs:line 20
2024-07-29 23:56:43.095 -03:00 [INF] HTTP GET /api/booking/19 responded 404 in 136.2066 ms
2024-07-29 23:56:43.096 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/19 - 404 null application/json 142.0246ms
2024-07-29 23:56:59.678 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/22 - null null
2024-07-29 23:56:59.682 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:56:59.684 -03:00 [INF] Route matched with {action = "GetBookingDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingDetails(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:56:59.694 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:56:59.706 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:56:59.799 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api) in 107.4132ms
2024-07-29 23:56:59.802 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:56:59.828 -03:00 [WRN] Resource not found.
System.Collections.Generic.KeyNotFoundException: Booking not found
   at HotelBookingSystem.Application.Services.BookingService.GetBookingDetailsAsync(Int32 bookingId) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Application\Services\BookingService.cs:line 145
   at HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails(Int32 bookingId) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Controllers\BookingController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HotelBookingSystem.Api.Middlewares.ErrorHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\loren\source\repos\Hotel Booking System\HotelBookingSystem.Api\Middlewares\ErrorHandlingMiddleware.cs:line 20
2024-07-29 23:56:59.860 -03:00 [INF] HTTP GET /api/booking/22 responded 404 in 178.8902 ms
2024-07-29 23:56:59.863 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/22 - 404 null application/json 184.7279ms
2024-07-29 23:57:04.715 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/15 - null null
2024-07-29 23:57:04.720 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:57:04.722 -03:00 [INF] Route matched with {action = "GetBookingDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingDetails(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:57:04.728 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:57:04.731 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:57:04.747 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 23:57:04.754 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api) in 29.4499ms
2024-07-29 23:57:04.757 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:57:04.759 -03:00 [INF] HTTP GET /api/booking/15 responded 200 in 39.6248 ms
2024-07-29 23:57:04.761 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/15 - 200 null application/json; charset=utf-8 45.2872ms
2024-07-29 23:57:20.079 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/15/pdf - null null
2024-07-29 23:57:20.087 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 23:37:08', Current time (UTC): '30/7/2024 02:57:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:57:20.094 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 23:37:08', Current time (UTC): '30/7/2024 02:57:20'.
2024-07-29 23:57:20.095 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 23:57:20.098 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:57:20.098 -03:00 [INF] HTTP GET /api/booking/15/pdf responded 401 in 12.9613 ms
2024-07-29 23:57:20.100 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/15/pdf - 401 0 null 21.1857ms
2024-07-29 23:57:27.605 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/15/pdf - null null
2024-07-29 23:57:27.614 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 23:57:27.618 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:57:27.627 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:57:27.632 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:57:28.905 -03:00 [INF] Executing FileContentResult, sending file with download name 'Booking_15.pdf' ...
2024-07-29 23:57:28.919 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api) in 1295.9022ms
2024-07-29 23:57:28.921 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 23:57:28.922 -03:00 [INF] HTTP GET /api/booking/15/pdf responded 200 in 1308.3446 ms
2024-07-29 23:57:28.925 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/15/pdf - 200 1330 application/pdf 1319.2636ms
2024-07-29 23:57:47.395 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/payment - application/json 61
2024-07-29 23:57:47.399 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 00:48:20', Current time (UTC): '30/7/2024 02:57:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:57:47.407 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 00:48:20', Current time (UTC): '30/7/2024 02:57:47'.
2024-07-29 23:57:47.409 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 23:57:47.410 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:57:47.411 -03:00 [INF] HTTP POST /api/payment responded 401 in 13.8100 ms
2024-07-29 23:57:47.414 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/payment - 401 0 null 18.1978ms
2024-07-29 23:57:53.562 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/payment - application/json 61
2024-07-29 23:57:53.566 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.CreatePayment (HotelBookingSystem.Api)'
2024-07-29 23:57:53.571 -03:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePayment(HotelBookingSystem.Application.DTO.PaymentDTO.PaymentRequest) on controller HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController (HotelBookingSystem.Api).
2024-07-29 23:57:53.584 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:57:53.593 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:57:53.629 -03:00 [INF] Executing command: INSERT INTO "Payments" ("Amount", "BookingId", "PaymentDate", "PaymentMethod", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "PaymentId";

2024-07-29 23:57:53.633 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Payments" ("Amount", "BookingId", "PaymentDate", "PaymentMethod", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "PaymentId";
2024-07-29 23:57:53.684 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelBookingSystem.Application.DTO.PaymentDTO.PaymentResponse'.
2024-07-29 23:57:53.697 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.CreatePayment (HotelBookingSystem.Api) in 123.0607ms
2024-07-29 23:57:53.701 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.CreatePayment (HotelBookingSystem.Api)'
2024-07-29 23:57:53.704 -03:00 [INF] HTTP POST /api/payment responded 201 in 138.8586 ms
2024-07-29 23:57:53.710 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/payment - 201 null application/json; charset=utf-8 148.1443ms
2024-07-29 23:58:09.371 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/payment/4 - null null
2024-07-29 23:58:09.376 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 00:48:20', Current time (UTC): '30/7/2024 02:58:09'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:58:09.383 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 00:48:20', Current time (UTC): '30/7/2024 02:58:09'.
2024-07-29 23:58:09.385 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 23:58:09.386 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:58:09.387 -03:00 [INF] HTTP GET /api/payment/4 responded 401 in 12.0933 ms
2024-07-29 23:58:09.389 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/payment/4 - 401 0 null 17.7338ms
2024-07-29 23:58:13.097 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/payment/4 - null null
2024-07-29 23:58:13.100 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api)'
2024-07-29 23:58:13.112 -03:00 [INF] Route matched with {action = "GetPaymentDetails", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaymentDetails(Int32) on controller HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController (HotelBookingSystem.Api).
2024-07-29 23:58:13.132 -03:00 [INF] Executing command: SELECT "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status"
FROM "Payments" AS "p"
WHERE "p"."PaymentId" = @__p_0
LIMIT 1
2024-07-29 23:58:13.135 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status"
FROM "Payments" AS "p"
WHERE "p"."PaymentId" = @__p_0
LIMIT 1
2024-07-29 23:58:13.141 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.PaymentDTO.PaymentResponse'.
2024-07-29 23:58:13.142 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api) in 24.0261ms
2024-07-29 23:58:13.148 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.GetPaymentDetails (HotelBookingSystem.Api)'
2024-07-29 23:58:13.151 -03:00 [INF] HTTP GET /api/payment/4 responded 200 in 52.0235 ms
2024-07-29 23:58:13.155 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/payment/4 - 200 null application/json; charset=utf-8 57.9938ms
2024-07-29 23:58:20.757 -03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7288/api/payment/4/status - application/json 19
2024-07-29 23:58:20.763 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 00:48:20', Current time (UTC): '30/7/2024 02:58:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:58:20.773 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '30/7/2024 00:48:20', Current time (UTC): '30/7/2024 02:58:20'.
2024-07-29 23:58:20.778 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 23:58:20.782 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:58:20.784 -03:00 [INF] HTTP PATCH /api/payment/4/status responded 401 in 22.2503 ms
2024-07-29 23:58:20.786 -03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7288/api/payment/4/status - 401 0 null 29.2863ms
2024-07-29 23:58:27.372 -03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7288/api/payment/4/status - application/json 19
2024-07-29 23:58:27.378 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.UpdatePaymentStatus (HotelBookingSystem.Api)'
2024-07-29 23:58:27.389 -03:00 [INF] Route matched with {action = "UpdatePaymentStatus", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePaymentStatus(Int32, System.String) on controller HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController (HotelBookingSystem.Api).
2024-07-29 23:58:27.403 -03:00 [INF] Executing command: SELECT "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status"
FROM "Payments" AS "p"
WHERE "p"."PaymentId" = @__p_0
LIMIT 1
2024-07-29 23:58:27.405 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status"
FROM "Payments" AS "p"
WHERE "p"."PaymentId" = @__p_0
LIMIT 1
2024-07-29 23:58:27.418 -03:00 [INF] Executing command: UPDATE "Payments" SET "Amount" = @p0, "BookingId" = @p1, "PaymentDate" = @p2, "PaymentMethod" = @p3, "Status" = @p4
WHERE "PaymentId" = @p5
RETURNING 1;

2024-07-29 23:58:27.419 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Double), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Payments" SET "Amount" = @p0, "BookingId" = @p1, "PaymentDate" = @p2, "PaymentMethod" = @p3, "Status" = @p4
WHERE "PaymentId" = @p5
RETURNING 1;
2024-07-29 23:58:27.430 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.PaymentDTO.PaymentResponse'.
2024-07-29 23:58:27.432 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.UpdatePaymentStatus (HotelBookingSystem.Api) in 35.4497ms
2024-07-29 23:58:27.433 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.HotelBookingSystem.Api.Controllers.PaymentController.UpdatePaymentStatus (HotelBookingSystem.Api)'
2024-07-29 23:58:27.435 -03:00 [INF] HTTP PATCH /api/payment/4/status responded 200 in 57.5834 ms
2024-07-29 23:58:27.438 -03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7288/api/payment/4/status - 200 null application/json; charset=utf-8 66.3341ms
2024-07-29 23:58:33.990 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/15 - null null
2024-07-29 23:58:33.995 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:58:33.996 -03:00 [INF] Route matched with {action = "GetBookingDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingDetails(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:58:34.000 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:58:34.005 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:58:34.011 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 23:58:34.013 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api) in 14.6464ms
2024-07-29 23:58:34.020 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:58:34.024 -03:00 [INF] HTTP GET /api/booking/15 responded 200 in 29.2526 ms
2024-07-29 23:58:34.026 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/15 - 200 null application/json; charset=utf-8 35.7307ms
2024-07-29 23:58:45.987 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/booking/15 - null null
2024-07-29 23:58:45.992 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 23:37:08', Current time (UTC): '30/7/2024 02:58:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-07-29 23:58:45.999 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/7/2024 23:37:08', Current time (UTC): '30/7/2024 02:58:45'.
2024-07-29 23:58:46.000 -03:00 [INF] Authorization failed. These requirements were not met:
Handler assertion should evaluate to true.
2024-07-29 23:58:46.001 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-07-29 23:58:46.002 -03:00 [INF] HTTP DELETE /api/booking/15 responded 401 in 10.9916 ms
2024-07-29 23:58:46.004 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/booking/15 - 401 0 null 16.3979ms
2024-07-29 23:58:50.379 -03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/booking/15 - null null
2024-07-29 23:58:50.382 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CancelBooking (HotelBookingSystem.Api)'
2024-07-29 23:58:50.388 -03:00 [INF] Route matched with {action = "CancelBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CancelBooking(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:58:50.394 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:58:50.398 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:58:50.411 -03:00 [INF] Executing command: SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 23:58:50.412 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."CityId", "c"."Country", "c"."CreatedAt", "c"."Name", "c"."PostOffice", "c"."ThumbnailUrl", "c"."UpdatedAt", "c"."Visitors"
FROM "Cities" AS "c"
WHERE "c"."CityId" = @__p_0
LIMIT 1
2024-07-29 23:58:50.421 -03:00 [INF] Executing command: UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;

2024-07-29 23:58:50.423 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 3), @p1='?' (DbType = DateTime), @p2='?' (Size = 8), @p3='?' (Size = 5), @p4='?', @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Cities" SET "Country" = @p0, "CreatedAt" = @p1, "Name" = @p2, "PostOffice" = @p3, "ThumbnailUrl" = @p4, "UpdatedAt" = @p5, "Visitors" = @p6
WHERE "CityId" = @p7
RETURNING 1;
2024-07-29 23:58:50.502 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-07-29 23:58:50.503 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.CancelBooking (HotelBookingSystem.Api) in 111.8468ms
2024-07-29 23:58:50.504 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.CancelBooking (HotelBookingSystem.Api)'
2024-07-29 23:58:50.505 -03:00 [INF] HTTP DELETE /api/booking/15 responded 204 in 123.9372 ms
2024-07-29 23:58:50.508 -03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/booking/15 - 204 null null 128.3965ms
2024-07-29 23:58:55.689 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/15/pdf - null null
2024-07-29 23:58:55.692 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 23:58:55.694 -03:00 [INF] Route matched with {action = "GetBookingPdf", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingPdf(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:58:55.700 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:58:55.706 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:58:55.729 -03:00 [INF] Executing FileContentResult, sending file with download name 'Booking_15.pdf' ...
2024-07-29 23:58:55.733 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api) in 34.3989ms
2024-07-29 23:58:55.735 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingPdf (HotelBookingSystem.Api)'
2024-07-29 23:58:55.738 -03:00 [INF] HTTP GET /api/booking/15/pdf responded 200 in 46.6135 ms
2024-07-29 23:58:55.740 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/15/pdf - 200 1416 application/pdf 50.7972ms
2024-07-29 23:59:00.026 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/booking/15 - null null
2024-07-29 23:59:00.028 -03:00 [INF] Executing endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:59:00.031 -03:00 [INF] Route matched with {action = "GetBookingDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingDetails(Int32) on controller HotelBookingSystem.Api.Controllers.BookingController (HotelBookingSystem.Api).
2024-07-29 23:59:00.039 -03:00 [INF] Executing command: SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:59:00.045 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."BookingId", "b"."CheckInDate", "b"."CheckOutDate", "b"."HotelId", "b"."RoomId", "b"."SpecialRequests", "b"."TotalPrice", "b"."UserId", "p"."PaymentId", "p"."Amount", "p"."BookingId", "p"."PaymentDate", "p"."PaymentMethod", "p"."Status", "h"."HotelId", "h"."Address", "h"."Amenities", "h"."CityId", "h"."CreatedAt", "h"."Description", "h"."HotelType", "h"."Name", "h"."Owner", "h"."StarRating", "h"."ThumbnailUrl", "h"."UpdatedAt", "u"."UserId", "u"."Address", "u"."City", "u"."Country", "u"."DateOfBirth", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Role", "r"."RoomId", "r"."AdultCapacity", "r"."ChildCapacity", "r"."CreatedAt", "r"."DiscountedPrice", "r"."FeaturedDeal", "r"."HotelId", "r"."ImagesUrl", "r"."PricePerNight", "r"."RoomType", "r"."UpdatedAt"
FROM "Bookings" AS "b"
LEFT JOIN "Payments" AS "p" ON "b"."BookingId" = "p"."BookingId"
INNER JOIN "Hotels" AS "h" ON "b"."HotelId" = "h"."HotelId"
INNER JOIN "Users" AS "u" ON "b"."UserId" = "u"."UserId"
INNER JOIN "Rooms" AS "r" ON "b"."RoomId" = "r"."RoomId"
WHERE "b"."BookingId" = @__bookingId_0
LIMIT 1
2024-07-29 23:59:00.063 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelBookingSystem.Application.DTO.BookingDTO.BookingResponse'.
2024-07-29 23:59:00.067 -03:00 [INF] Executed action HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api) in 30.3495ms
2024-07-29 23:59:00.070 -03:00 [INF] Executed endpoint 'HotelBookingSystem.Api.Controllers.BookingController.GetBookingDetails (HotelBookingSystem.Api)'
2024-07-29 23:59:00.072 -03:00 [INF] HTTP GET /api/booking/15 responded 200 in 44.4688 ms
2024-07-29 23:59:00.079 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/booking/15 - 200 null application/json; charset=utf-8 53.6304ms
